Error: Unable to access jarfile build/libs/fairytale-0.0.1-SNAPSHOT.jar
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.0)

2025-06-18T06:16:17.881Z  INFO 90775 --- [           main] c.f.fairytale.FairytaleApplication       : Starting FairytaleApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 90775 (/opt/fairytale/spring_boot/build/libs/fairytale-0.0.1-SNAPSHOT.jar started by ubuntu in /opt/fairytale)
2025-06-18T06:16:17.889Z  INFO 90775 --- [           main] c.f.fairytale.FairytaleApplication       : No active profile set, falling back to 1 default profile: "default"
2025-06-18T06:16:20.498Z  INFO 90775 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-18T06:16:20.682Z  INFO 90775 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 167 ms. Found 12 JPA repository interfaces.
2025-06-18T06:16:22.253Z  INFO 90775 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-18T06:16:22.287Z  INFO 90775 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-18T06:16:22.287Z  INFO 90775 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-18T06:16:22.368Z  INFO 90775 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-18T06:16:22.369Z  INFO 90775 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4266 ms
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
2025-06-18T06:16:22.585Z  INFO 90775 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-18T06:16:23.483Z  INFO 90775 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2ccc9681
2025-06-18T06:16:23.486Z  INFO 90775 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-18T06:16:23.721Z  INFO 90775 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-18T06:16:23.968Z  INFO 90775 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-18T06:16:24.076Z  INFO 90775 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-18T06:16:25.065Z  INFO 90775 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-18T06:16:25.265Z  INFO 90775 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.4
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-18T06:16:27.633Z  INFO 90775 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-18T06:16:28.648Z  INFO 90775 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-18T06:16:29.563Z  INFO 90775 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-18T06:16:33.237Z  WARN 90775 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
✅ [WebConfig] 정적 리소스 핸들러 등록: /coloring/**
2025-06-18T06:16:34.319Z  INFO 90775 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-18T06:16:34.338Z  INFO 90775 --- [           main] c.f.fairytale.FairytaleApplication       : Started FairytaleApplication in 17.929 seconds (process running for 19.362)
2025-06-18T06:17:06.990Z  INFO 90775 --- [0.0-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-18T06:17:06.991Z  INFO 90775 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-18T06:17:06.994Z  INFO 90775 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T06:17:29.683Z  INFO 90775 --- [0.0-8080-exec-4] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-18T06:17:29.756Z  INFO 90775 --- [0.0-8080-exec-4] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 20개 조회 성공
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T06:28:28.835Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.gallery.GalleryController  : 🔍 갤러리 이미지 조회 요청 - 사용자: kakao_4290101000
2025-06-18T06:28:28.836Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.gallery.GalleryService     : 🔍 사용자 갤러리 이미지 조회 시작 - 사용자: kakao_4290101000
2025-06-18T06:28:28.882Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.gallery.GalleryService     : 🔍 이미지가 있는 스토리 개수: 6
2025-06-18T06:28:28.903Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.gallery.GalleryService     : 🔍 색칠 완성작 개수: 7
2025-06-18T06:28:28.904Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.gallery.GalleryService     : ✅ 갤러리 이미지 변환 완료 - 최종 개수: 13
2025-06-18T06:28:28.904Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.gallery.GalleryService     :    - 동화 이미지: 6개
2025-06-18T06:28:28.905Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.gallery.GalleryService     :    - 색칠 완성작: 7개
2025-06-18T06:28:28.909Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.gallery.GalleryController  : ✅ 갤러리 이미지 조회 완료 - 개수: 13
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T06:28:31.609Z  INFO 90775 --- [0.0-8080-exec-8] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-18T06:28:31.616Z  INFO 90775 --- [0.0-8080-exec-8] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 0개 조회 성공
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T06:28:38.374Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T06:28:38.376Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T06:28:38.376Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T06:28:38.383Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T06:28:38.383Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T06:28:38.403Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T06:28:38.404Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T06:28:38.404Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T06:28:38.405Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T06:28:38.406Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:28:38.406Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T06:28:38.406Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T06:28:38.411Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:28:41.091Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T06:28:41.101Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T06:28:41.143Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 100
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T06:28:41.328Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 100
2025-06-18T06:28:41.329Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 100
2025-06-18T06:28:41.334Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 325
2025-06-18T06:28:41.335Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 325, voice = onyx, speed = 1.0
2025-06-18T06:28:41.337Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:28:41.338Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T06:28:41.338Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T06:28:41.341Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:28:44.223Z ERROR 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
2025-06-18T06:28:44.247Z ERROR 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : ❌ 음성 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T06:28:52.350Z ERROR 90775 --- [0.0-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: 토큰 갱신 중 오류 발생] with root cause

java.lang.RuntimeException: 리프레시 토큰이 일치하지 않습니다.
	at com.fairytale.fairytale.auth.service.OAuthService.refreshTokens(OAuthService.java:337) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at com.fairytale.fairytale.auth.service.OAuthService$$SpringCGLIB$$0.refreshTokens(<generated>) ~[!/:0.0.1-SNAPSHOT]
	at com.fairytale.fairytale.auth.controller.OAuthController.refreshToken(OAuthController.java:62) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at com.fairytale.fairytale.auth.strategy.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:31) ~[!/:0.0.1-SNAPSHOT]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T06:28:54.610Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T06:28:54.612Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T06:28:54.612Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=우정, voice=fable, babyId=2
2025-06-18T06:28:54.619Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T06:28:54.620Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T06:28:54.623Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T06:28:54.624Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T06:28:54.624Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T06:28:54.624Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='우정 동화'
2025-06-18T06:28:54.624Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:28:54.624Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T06:28:54.624Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T06:28:54.624Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:28:58.062Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T06:28:58.063Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T06:28:58.068Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 101
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T06:28:58.099Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 101
2025-06-18T06:28:58.100Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 101
2025-06-18T06:28:58.103Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 325
2025-06-18T06:28:58.104Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 325, voice = fable, speed = 1.4
2025-06-18T06:28:58.104Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:28:58.104Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T06:28:58.104Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T06:28:58.104Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:29:00.890Z ERROR 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
2025-06-18T06:29:00.895Z ERROR 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : ❌ 음성 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
2025-06-18T06:29:01.252Z  INFO 90775 --- [0.0-8080-exec-2] c.f.f.auth.controller.OAuthController    : OAuth 로그인 요청 - Provider: kakao
🔍 OAuth 로그인 시작 - Provider: kakao
🔍 사용자명 중복으로 인한 변경: kakao_4287771333_1
🔍 닉네임 중복으로 인한 변경: 나현_1
🔍 소셜 로그인 사용자 정보: kakao_4287771333_1
🔍 saveOrUpdateUser 시작 - 이메일: ansdud923@naver.com
🔍 USER 역할 찾는 중...
🔍 USER 역할 조회 완료
🔍 사용자 역할 설정 완료: USER
🔍 이메일로 사용자 찾는 중: ansdud923@naver.com
🔍 이메일 조회 결과: 발견
🔍 기존 사용자 업데이트: kakao_4287771333
🔍 DB 저장 완료 - ID: 1, Username: kakao_4287771333
🔍 JWT 토큰 생성 - Username: kakao_4287771333, Nickname: 나현_1
🔍 JWT 생성 - Username: kakao_4287771333, Nickname: 나현_1
🔍 JWT 생성 - Username: kakao_4287771333, Nickname: 나현_1
🔍 JWT 토큰 발급 완료
2025-06-18T06:29:01.614Z  INFO 90775 --- [0.0-8080-exec-2] c.f.f.auth.controller.OAuthController    : OAuth 로그인 성공 - Provider: kakao
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T06:30:17.331Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T06:30:17.335Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T06:30:17.335Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=사랑, voice=nova, babyId=1
2025-06-18T06:30:17.341Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T06:30:17.341Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T06:30:17.344Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T06:30:17.344Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T06:30:17.344Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T06:30:17.344Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='사랑 동화'
2025-06-18T06:30:17.344Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:30:17.344Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T06:30:17.344Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T06:30:17.345Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:30:19.878Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T06:30:19.878Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 1
2025-06-18T06:30:19.886Z  INFO 90775 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 102
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T06:30:20.465Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 102
2025-06-18T06:30:20.467Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 102
2025-06-18T06:30:20.470Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 325
2025-06-18T06:30:20.471Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 325, voice = nova, speed = 1.0
2025-06-18T06:30:20.471Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:30:20.471Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T06:30:20.471Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T06:30:20.471Z  INFO 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:30:22.998Z ERROR 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
2025-06-18T06:30:23.000Z ERROR 90775 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : ❌ 음성 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T06:31:21.402Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 102
2025-06-18T06:31:21.406Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:31:21.406Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T06:31:21.407Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T06:31:21.407Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:31:24.412Z ERROR 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-18T06:31:24.412Z ERROR 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ❌ 이미지 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-18T06:31:24.413Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔄 더미 이미지로 저장 완료: https://picsum.photos/800/600?random=1750228284412
2025-06-18T06:31:24.413Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ⚠️ 더미 이미지이므로 색칠공부 템플릿 생성 건너뜀
2025-06-18T06:31:24.420Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T06:31:24.420Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : Story ID: 102
2025-06-18T06:31:24.420Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : Title: 사랑 동화
2025-06-18T06:31:24.421Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750228284412
2025-06-18T06:31:24.421Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T06:31:24.421Z  INFO 90775 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : Voice Content: 
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T06:31:49.561Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : 🔍 흑백 변환 요청: https://picsum.photos/800/600?random=1750228284412
2025-06-18T06:31:49.563Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 흑백변환 버튼 요청: https://picsum.photos/800/600?random=1750228284412
2025-06-18T06:31:51.235Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 📝 기존 흑백 이미지 없음, 새로 변환 시작
2025-06-18T06:31:51.236Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 📤 흑백 변환 시작: https://picsum.photos/800/600?random=1750228284412
2025-06-18T06:31:51.237Z  WARN 90775 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ⚠️ S3 URL이 아님, 원본 반환: https://picsum.photos/800/600?random=1750228284412
2025-06-18T06:31:51.238Z  INFO 90775 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : ✅ 흑백 변환 완료 - 원본: https://picsum.photos/800/600?random=1750228284412, 변환: https://picsum.photos/800/600?random=1750228284412
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T06:31:51.698Z  INFO 90775 --- [0.0-8080-exec-8] c.f.f.coloring.ColoringController        : 🎨 색칠공부 템플릿 생성 요청
2025-06-18T06:31:51.698Z  INFO 90775 --- [0.0-8080-exec-8] c.f.f.coloring.ColoringController        : 🎨 템플릿 생성 파라미터:
2025-06-18T06:31:51.698Z  INFO 90775 --- [0.0-8080-exec-8] c.f.f.coloring.ColoringController        :   - storyId: 102
2025-06-18T06:31:51.699Z  INFO 90775 --- [0.0-8080-exec-8] c.f.f.coloring.ColoringController        :   - title: 곰돌이의 사랑 색칠공부
2025-06-18T06:31:51.699Z  INFO 90775 --- [0.0-8080-exec-8] c.f.f.coloring.ColoringController        :   - originalImageUrl: https://picsum.photos/800/600?random=1750228284412
2025-06-18T06:31:51.699Z  INFO 90775 --- [0.0-8080-exec-8] c.f.f.coloring.ColoringController        :   - blackWhiteImageUrl: https://picsum.photos/800/600?random=1750228284412
🎨 [ColoringTemplateService] 색칠공부 템플릿 생성 시작 - StoryId: 102
🆕 [ColoringTemplateService] 새 템플릿 생성
✅ [ColoringTemplateService] 색칠공부 템플릿 저장 완료 - ID: 65
2025-06-18T06:31:51.716Z  INFO 90775 --- [0.0-8080-exec-8] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 생성 완료 - ID: 65
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
2025-06-18T06:31:52.103Z  INFO 90775 --- [0.0-8080-exec-1] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-18T06:31:52.113Z  INFO 90775 --- [0.0-8080-exec-1] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 1개 조회 성공
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T06:37:18.544Z  INFO 90775 --- [0.0-8080-exec-6] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-18T06:37:18.559Z  INFO 90775 --- [0.0-8080-exec-6] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 1개 조회 성공
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T06:41:48.555Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T06:41:48.557Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T06:41:48.557Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=사랑, voice=onyx, babyId=1
2025-06-18T06:41:48.563Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T06:41:48.563Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T06:41:48.567Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T06:41:48.567Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T06:41:48.567Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T06:41:48.567Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='사랑 동화'
2025-06-18T06:41:48.567Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:41:48.567Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T06:41:48.567Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T06:41:48.567Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:41:51.883Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T06:41:51.883Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 1
2025-06-18T06:41:51.888Z  INFO 90775 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 103
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T06:41:52.295Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 103
2025-06-18T06:41:52.295Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 103
2025-06-18T06:41:52.299Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 325
2025-06-18T06:41:52.299Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 325, voice = onyx, speed = 1.0
2025-06-18T06:41:52.300Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:41:52.300Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T06:41:52.300Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T06:41:52.301Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:41:55.104Z ERROR 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
2025-06-18T06:41:55.106Z ERROR 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : ❌ 음성 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T06:46:51.796Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T06:46:51.798Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T06:46:51.799Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=사랑, voice=nova, babyId=1
2025-06-18T06:46:51.804Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T06:46:51.804Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T06:46:51.807Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T06:46:51.807Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T06:46:51.807Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T06:46:51.807Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='사랑 동화'
2025-06-18T06:46:51.807Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:46:51.807Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T06:46:51.807Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T06:46:51.807Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:46:54.720Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T06:46:54.720Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 1
2025-06-18T06:46:54.730Z  INFO 90775 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 104
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T06:46:54.855Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 104
2025-06-18T06:46:54.855Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 104
2025-06-18T06:46:54.859Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 325
2025-06-18T06:46:54.860Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 325, voice = nova, speed = 1.0
2025-06-18T06:46:54.860Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T06:46:54.860Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T06:46:54.860Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T06:46:54.860Z  INFO 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T06:46:58.272Z ERROR 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
2025-06-18T06:46:58.275Z ERROR 90775 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : ❌ 음성 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/voice": "{"detail":"음성 생성 실패: 500: 음성 파일 생성 실패"}"
2025-06-18T07:10:44.644Z ERROR 90775 --- [0.0-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: 토큰 갱신 중 오류 발생] with root cause

java.lang.RuntimeException: 리프레시 토큰이 일치하지 않습니다.
	at com.fairytale.fairytale.auth.service.OAuthService.refreshTokens(OAuthService.java:337) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at com.fairytale.fairytale.auth.service.OAuthService$$SpringCGLIB$$0.refreshTokens(<generated>) ~[!/:0.0.1-SNAPSHOT]
	at com.fairytale.fairytale.auth.controller.OAuthController.refreshToken(OAuthController.java:62) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at com.fairytale.fairytale.auth.strategy.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:31) ~[!/:0.0.1-SNAPSHOT]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-06-18T07:10:49.448Z  INFO 90775 --- [0.0-8080-exec-7] c.f.f.auth.controller.OAuthController    : OAuth 로그인 요청 - Provider: kakao
🔍 OAuth 로그인 시작 - Provider: kakao
🔍 사용자명 중복으로 인한 변경: kakao_4290101000_1
🔍 소셜 로그인 사용자 정보: kakao_4290101000_1
🔍 saveOrUpdateUser 시작 - 이메일: dnflsmstltk12@daum.net
🔍 USER 역할 찾는 중...
🔍 USER 역할 조회 완료
🔍 사용자 역할 설정 완료: USER
🔍 이메일로 사용자 찾는 중: dnflsmstltk12@daum.net
🔍 이메일 조회 결과: 발견
🔍 기존 사용자 업데이트: kakao_4290101000
🔍 DB 저장 완료 - ID: 2, Username: kakao_4290101000
🔍 JWT 토큰 생성 - Username: kakao_4290101000, Nickname: 옥현우
🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우
🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우
🔍 JWT 토큰 발급 완료
2025-06-18T07:10:49.570Z  INFO 90775 --- [0.0-8080-exec-7] c.f.f.auth.controller.OAuthController    : OAuth 로그인 성공 - Provider: kakao
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T07:10:51.207Z  INFO 90775 --- [0.0-8080-exec-2] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-18T07:10:51.216Z  INFO 90775 --- [0.0-8080-exec-2] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 1개 조회 성공
2025-06-18T07:12:52.082Z  INFO 90775 --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-06-18T07:12:52.085Z  INFO 90775 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-06-18T07:12:52.097Z  INFO 90775 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-18T07:12:52.099Z  INFO 90775 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-18T07:12:52.120Z  INFO 90775 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.0)

2025-06-18T07:13:17.090Z  INFO 91192 --- [           main] c.f.fairytale.FairytaleApplication       : Starting FairytaleApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 91192 (/opt/fairytale/spring_boot/build/libs/fairytale-0.0.1-SNAPSHOT.jar started by ubuntu in /opt/fairytale)
2025-06-18T07:13:17.101Z  INFO 91192 --- [           main] c.f.fairytale.FairytaleApplication       : No active profile set, falling back to 1 default profile: "default"
2025-06-18T07:13:19.519Z  INFO 91192 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-18T07:13:19.684Z  INFO 91192 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 146 ms. Found 12 JPA repository interfaces.
2025-06-18T07:13:21.165Z  INFO 91192 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-18T07:13:21.192Z  INFO 91192 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-18T07:13:21.193Z  INFO 91192 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-18T07:13:21.256Z  INFO 91192 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-18T07:13:21.258Z  INFO 91192 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3977 ms
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
2025-06-18T07:13:21.470Z  INFO 91192 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-18T07:13:22.201Z  INFO 91192 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4a9b3956
2025-06-18T07:13:22.204Z  INFO 91192 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-18T07:13:22.425Z  INFO 91192 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-18T07:13:22.534Z  INFO 91192 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-18T07:13:22.625Z  INFO 91192 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-18T07:13:23.488Z  INFO 91192 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-18T07:13:23.742Z  INFO 91192 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.4
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-18T07:13:26.074Z  INFO 91192 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-18T07:13:27.109Z  INFO 91192 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-18T07:13:27.948Z  INFO 91192 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-18T07:13:31.568Z  WARN 91192 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
✅ [WebConfig] 정적 리소스 핸들러 등록: /coloring/**
2025-06-18T07:13:32.664Z  INFO 91192 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-18T07:13:32.686Z  INFO 91192 --- [           main] c.f.fairytale.FairytaleApplication       : Started FairytaleApplication in 16.973 seconds (process running for 18.118)
2025-06-18T07:15:32.515Z  INFO 91192 --- [0.0-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-18T07:15:32.515Z  INFO 91192 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-18T07:15:32.519Z  INFO 91192 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T07:16:16.069Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T07:16:16.072Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T07:16:16.072Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=가족, voice=fable, babyId=1
2025-06-18T07:16:16.115Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T07:16:16.116Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T07:16:16.135Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T07:16:16.136Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T07:16:16.137Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T07:16:16.139Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='가족 동화'
2025-06-18T07:16:16.139Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:16:16.139Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:16:16.139Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:16:16.153Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:16:16.225Z ERROR 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T07:16:16.230Z ERROR 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T07:17:05.574Z  INFO 91192 --- [0.0-8080-exec-1] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-18T07:17:05.604Z  INFO 91192 --- [0.0-8080-exec-1] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 1개 조회 성공
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T07:17:07.557Z  INFO 91192 --- [0.0-8080-exec-3] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-18T07:17:07.564Z  INFO 91192 --- [0.0-8080-exec-3] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 1개 조회 성공
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:17:28.060Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T07:17:28.062Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T07:17:28.062Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T07:17:28.068Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T07:17:28.068Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T07:17:28.072Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T07:17:28.072Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T07:17:28.072Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T07:17:28.072Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T07:17:28.072Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:17:28.072Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:17:28.072Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:17:28.073Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:17:28.079Z ERROR 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T07:17:28.086Z ERROR 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:17:29.574Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T07:17:29.577Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T07:17:29.577Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T07:17:29.584Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T07:17:29.586Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T07:17:29.590Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T07:17:29.591Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T07:17:29.591Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T07:17:29.592Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T07:17:29.592Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:17:29.592Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:17:29.592Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:17:29.592Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:17:29.597Z ERROR 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T07:17:29.600Z ERROR 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:17:36.981Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T07:17:36.983Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T07:17:36.983Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T07:17:36.991Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T07:17:36.993Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T07:17:36.997Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T07:17:36.997Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T07:17:36.997Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T07:17:36.997Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T07:17:36.997Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:17:36.998Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:17:36.998Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:17:36.998Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:17:37.002Z ERROR 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T07:17:37.005Z ERROR 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:17:39.747Z  INFO 91192 --- [0.0-8080-exec-2] c.f.fairytale.gallery.GalleryController  : 🔍 갤러리 이미지 조회 요청 - 사용자: kakao_4290101000
2025-06-18T07:17:39.748Z  INFO 91192 --- [0.0-8080-exec-2] c.f.fairytale.gallery.GalleryService     : 🔍 사용자 갤러리 이미지 조회 시작 - 사용자: kakao_4290101000
2025-06-18T07:17:39.786Z  INFO 91192 --- [0.0-8080-exec-2] c.f.fairytale.gallery.GalleryService     : 🔍 이미지가 있는 스토리 개수: 8
2025-06-18T07:17:39.804Z  INFO 91192 --- [0.0-8080-exec-2] c.f.fairytale.gallery.GalleryService     : 🔍 색칠 완성작 개수: 7
2025-06-18T07:17:39.806Z  INFO 91192 --- [0.0-8080-exec-2] c.f.fairytale.gallery.GalleryService     : ✅ 갤러리 이미지 변환 완료 - 최종 개수: 15
2025-06-18T07:17:39.806Z  INFO 91192 --- [0.0-8080-exec-2] c.f.fairytale.gallery.GalleryService     :    - 동화 이미지: 8개
2025-06-18T07:17:39.806Z  INFO 91192 --- [0.0-8080-exec-2] c.f.fairytale.gallery.GalleryService     :    - 색칠 완성작: 7개
2025-06-18T07:17:39.810Z  INFO 91192 --- [0.0-8080-exec-2] c.f.fairytale.gallery.GalleryController  : ✅ 갤러리 이미지 조회 완료 - 개수: 15
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T07:17:42.492Z  INFO 91192 --- [0.0-8080-exec-4] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-18T07:17:42.500Z  INFO 91192 --- [0.0-8080-exec-4] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 1개 조회 성공
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T07:17:47.577Z  INFO 91192 --- [0.0-8080-exec-6] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-18T07:17:47.586Z  INFO 91192 --- [0.0-8080-exec-6] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 1개 조회 성공
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T07:18:26.384Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T07:18:26.386Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T07:18:26.387Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=가족, voice=nova, babyId=1
2025-06-18T07:18:26.392Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T07:18:26.393Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T07:18:26.396Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T07:18:26.396Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T07:18:26.396Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T07:18:26.396Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='가족 동화'
2025-06-18T07:18:26.396Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:18:26.396Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:18:26.396Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:18:26.397Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:18:26.400Z ERROR 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T07:18:26.402Z ERROR 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:23:00.586Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T07:23:00.591Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T07:23:00.592Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T07:23:00.599Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T07:23:00.599Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T07:23:00.603Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T07:23:00.603Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T07:23:00.603Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T07:23:00.603Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T07:23:00.603Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:23:00.604Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:23:00.604Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:23:00.604Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:23:00.608Z ERROR 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T07:23:00.610Z ERROR 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T07:27:27.189Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T07:27:27.191Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T07:27:27.192Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=가족, voice=fable, babyId=1
2025-06-18T07:27:27.196Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T07:27:27.196Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T07:27:27.199Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T07:27:27.199Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T07:27:27.200Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T07:27:27.200Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='가족 동화'
2025-06-18T07:27:27.200Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:27:27.200Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:27:27.200Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:27:27.200Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:27:46.344Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T07:27:46.359Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 1
2025-06-18T07:27:46.425Z  INFO 91192 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 105
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T07:27:46.741Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 105
2025-06-18T07:27:46.741Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 105
2025-06-18T07:27:46.748Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1478
2025-06-18T07:27:46.749Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1478, voice = fable, speed = 1.0
2025-06-18T07:27:46.749Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:27:46.749Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T07:27:46.749Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T07:27:46.751Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:28:26.962Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T07:28:26.963Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-18T07:28:27.038Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 5295360 문자
2025-06-18T07:28:27.038Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 음성 타입: fable
2025-06-18T07:28:27.070Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 3971520 bytes
2025-06-18T07:28:27.081Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_105_1750231707071.mp3
2025-06-18T07:28:27.081Z  INFO 91192 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_105_1750231707071.mp3
2025-06-18T07:28:27.082Z  INFO 91192 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/18/123c4113_temp_voice_105_1750231707071.mp3
2025-06-18T07:28:27.785Z  WARN 91192 --- [0.0-8080-exec-4] com.amazonaws.util.Base64                : JAXB is unavailable. Will fallback to SDK implementation which may be less performant.If you are using Java 9+, you will need to include javax.xml.bind:jaxb-api as a dependency.
2025-06-18T07:28:27.786Z  INFO 91192 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/18/123c4113_temp_voice_105_1750231707071.mp3
2025-06-18T07:28:27.787Z  INFO 91192 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/18/123c4113_temp_voice_105_1750231707071.mp3, 만료시간: 1440분
2025-06-18T07:28:27.791Z  INFO 91192 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/123c4113_temp_voice_105_1750231707071.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T072827Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a144ce4791dfb6df33297a9d93551eb8e5e5be93e84c1153e6e2fd7ce985b8ca
2025-06-18T07:28:27.792Z  INFO 91192 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/123c4113_temp_voice_105_1750231707071.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T072827Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a144ce4791dfb6df33297a9d93551eb8e5e5be93e84c1153e6e2fd7ce985b8ca
2025-06-18T07:28:27.793Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/123c4113_temp_voice_105_1750231707071.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T072827Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a144ce4791dfb6df33297a9d93551eb8e5e5be93e84c1153e6e2fd7ce985b8ca
2025-06-18T07:28:27.795Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-18T07:28:27.796Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/123c4113_temp_voice_105_1750231707071.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T072827Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a144ce4791dfb6df33297a9d93551eb8e5e5be93e84c1153e6e2fd7ce985b8ca
2025-06-18T07:28:27.842Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/123c4113_temp_voice_105_1750231707071.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T072827Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a144ce4791dfb6df33297a9d93551eb8e5e5be93e84c1153e6e2fd7ce985b8ca
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T07:28:33.762Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 105
2025-06-18T07:28:33.768Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:28:33.768Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T07:28:33.768Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T07:28:33.769Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:28:46.045Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T07:28:46.046Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-18T07:28:46.046Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image.png"}
2025-06-18T07:28:46.046Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-18T07:28:46.046Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image.png
2025-06-18T07:28:46.046Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image.png
2025-06-18T07:28:46.046Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image.png
2025-06-18T07:28:46.046Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image.png
2025-06-18T07:28:46.046Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image.png
2025-06-18T07:28:46.047Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image.png
2025-06-18T07:28:46.047Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image.png
2025-06-18T07:28:46.047Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image.png
2025-06-18T07:28:46.047Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image.png
2025-06-18T07:28:46.048Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image.png
2025-06-18T07:28:46.048Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image.png
2025-06-18T07:28:46.048Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image.png
2025-06-18T07:28:46.048Z  WARN 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-18T07:28:46.048Z ERROR 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image.png
2025-06-18T07:28:46.048Z ERROR 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image.png
2025-06-18T07:28:46.048Z ERROR 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-18T07:28:46.050Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-18T07:28:46.141Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 105
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 105
2025-06-18T07:28:46.151Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750231726048
2025-06-18T07:28:46.151Z  WARN 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750231726048
2025-06-18T07:28:46.159Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T07:28:46.159Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Story ID: 105
2025-06-18T07:28:46.159Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Title: 가족 동화
2025-06-18T07:28:46.159Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750231726048
2025-06-18T07:28:46.159Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T07:28:46.159Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Voice Content: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/123c4113_temp_voice_105_1750231707071.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T072827Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a144ce4791dfb6df33297a9d93551eb8e5e5be93e84c1153e6e2fd7ce985b8ca
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:32:38.751Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T07:32:38.753Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T07:32:38.754Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T07:32:38.759Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T07:32:38.760Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T07:32:38.762Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T07:32:38.763Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T07:32:38.763Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T07:32:38.763Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T07:32:38.763Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:32:38.763Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:32:38.763Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:32:38.763Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:33:03.820Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T07:33:03.821Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T07:33:03.830Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 106
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:33:03.881Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 106
2025-06-18T07:33:03.882Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 106
2025-06-18T07:33:03.888Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1754
2025-06-18T07:33:03.891Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1754, voice = onyx, speed = 1.0
2025-06-18T07:33:03.891Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:33:03.891Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T07:33:03.891Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T07:33:03.892Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:33:11.116Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 106
2025-06-18T07:33:11.122Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:33:11.122Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T07:33:11.123Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T07:33:11.123Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:33:20.590Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T07:33:20.590Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-18T07:33:20.590Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image_1.png"}
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image_1.png
2025-06-18T07:33:20.591Z  WARN 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-18T07:33:20.591Z ERROR 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image_1.png
2025-06-18T07:33:20.591Z ERROR 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image_1.png
2025-06-18T07:33:20.592Z ERROR 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-18T07:33:20.593Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-18T07:33:20.605Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 106
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 106
2025-06-18T07:33:20.611Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750232000592
2025-06-18T07:33:20.611Z  WARN 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750232000592
2025-06-18T07:33:20.616Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T07:33:20.616Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Story ID: 106
2025-06-18T07:33:20.617Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-18T07:33:20.617Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750232000592
2025-06-18T07:33:20.617Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T07:33:20.617Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-18T07:33:59.852Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T07:33:59.852Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-18T07:33:59.897Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 6197760 문자
2025-06-18T07:33:59.897Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 음성 타입: onyx
2025-06-18T07:33:59.913Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4648320 bytes
2025-06-18T07:33:59.925Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_106_1750232039913.mp3
2025-06-18T07:33:59.925Z  INFO 91192 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_106_1750232039913.mp3
2025-06-18T07:33:59.926Z  INFO 91192 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/18/2715c71c_temp_voice_106_1750232039913.mp3
2025-06-18T07:34:00.354Z  INFO 91192 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/18/2715c71c_temp_voice_106_1750232039913.mp3
2025-06-18T07:34:00.355Z  INFO 91192 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/18/2715c71c_temp_voice_106_1750232039913.mp3, 만료시간: 1440분
2025-06-18T07:34:00.357Z  INFO 91192 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2715c71c_temp_voice_106_1750232039913.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T073400Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1449fb95921f70cf2ab9bf3dc2ad2d00a3adf26a49ede9b45cfa452117b6fa5f
2025-06-18T07:34:00.359Z  INFO 91192 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2715c71c_temp_voice_106_1750232039913.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T073400Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1449fb95921f70cf2ab9bf3dc2ad2d00a3adf26a49ede9b45cfa452117b6fa5f
2025-06-18T07:34:00.359Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2715c71c_temp_voice_106_1750232039913.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T073400Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1449fb95921f70cf2ab9bf3dc2ad2d00a3adf26a49ede9b45cfa452117b6fa5f
2025-06-18T07:34:00.361Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-18T07:34:00.361Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2715c71c_temp_voice_106_1750232039913.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T073400Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1449fb95921f70cf2ab9bf3dc2ad2d00a3adf26a49ede9b45cfa452117b6fa5f
2025-06-18T07:34:00.373Z  INFO 91192 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2715c71c_temp_voice_106_1750232039913.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T073400Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1449fb95921f70cf2ab9bf3dc2ad2d00a3adf26a49ede9b45cfa452117b6fa5f
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:53:49.744Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T07:53:49.746Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T07:53:49.746Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=fable, babyId=2
2025-06-18T07:53:49.755Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T07:53:49.755Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T07:53:49.757Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T07:53:49.758Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T07:53:49.758Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T07:53:49.758Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T07:53:49.758Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:53:49.758Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:53:49.758Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:53:49.758Z  INFO 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:53:49.763Z ERROR 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T07:53:49.765Z ERROR 91192 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:56:56.864Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T07:56:56.866Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T07:56:56.867Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=fable, babyId=2
2025-06-18T07:56:56.874Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T07:56:56.875Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T07:56:56.879Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T07:56:56.879Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T07:56:56.879Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T07:56:56.879Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T07:56:56.879Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:56:56.879Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T07:56:56.879Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T07:56:56.879Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:57:21.523Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T07:57:21.524Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T07:57:21.538Z  INFO 91192 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 107
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:57:21.665Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 107
2025-06-18T07:57:21.666Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 107
2025-06-18T07:57:21.670Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1637
2025-06-18T07:57:21.671Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1637, voice = fable, speed = 1.0
2025-06-18T07:57:21.671Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:57:21.671Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T07:57:21.671Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T07:57:21.672Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T07:57:25.377Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 107
2025-06-18T07:57:25.382Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T07:57:25.382Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T07:57:25.382Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T07:57:25.382Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T07:57:37.274Z ERROR 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-18T07:57:37.274Z ERROR 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ 이미지 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-18T07:57:37.275Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔄 더미 이미지로 저장 완료: https://picsum.photos/800/600?random=1750233457275
2025-06-18T07:57:37.276Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ⚠️ 더미 이미지이므로 색칠공부 템플릿 생성 건너뜀
2025-06-18T07:57:37.282Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T07:57:37.283Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Story ID: 107
2025-06-18T07:57:37.283Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-18T07:57:37.283Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750233457275
2025-06-18T07:57:37.283Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T07:57:37.283Z  INFO 91192 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-18T07:57:55.699Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T07:57:55.699Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-18T07:57:55.754Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 5879040 문자
2025-06-18T07:57:55.756Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 음성 타입: fable
2025-06-18T07:57:55.772Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4409280 bytes
2025-06-18T07:57:55.780Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_107_1750233475772.mp3
2025-06-18T07:57:55.780Z  INFO 91192 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_107_1750233475772.mp3
2025-06-18T07:57:55.782Z  INFO 91192 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/18/2633f523_temp_voice_107_1750233475772.mp3
2025-06-18T07:57:55.966Z  INFO 91192 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/18/2633f523_temp_voice_107_1750233475772.mp3
2025-06-18T07:57:55.966Z  INFO 91192 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/18/2633f523_temp_voice_107_1750233475772.mp3, 만료시간: 1440분
2025-06-18T07:57:55.968Z  INFO 91192 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2633f523_temp_voice_107_1750233475772.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T075755Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a5bf2e69e096527558ab1f349152f089cafe677eafd08a6413d26bc1b468aa37
2025-06-18T07:57:55.968Z  INFO 91192 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2633f523_temp_voice_107_1750233475772.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T075755Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a5bf2e69e096527558ab1f349152f089cafe677eafd08a6413d26bc1b468aa37
2025-06-18T07:57:55.968Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2633f523_temp_voice_107_1750233475772.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T075755Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a5bf2e69e096527558ab1f349152f089cafe677eafd08a6413d26bc1b468aa37
2025-06-18T07:57:55.970Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-18T07:57:55.970Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2633f523_temp_voice_107_1750233475772.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T075755Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a5bf2e69e096527558ab1f349152f089cafe677eafd08a6413d26bc1b468aa37
2025-06-18T07:57:55.979Z  INFO 91192 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2633f523_temp_voice_107_1750233475772.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T075755Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a5bf2e69e096527558ab1f349152f089cafe677eafd08a6413d26bc1b468aa37
2025-06-18T08:05:07.818Z  INFO 91192 --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-06-18T08:05:07.827Z  INFO 91192 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-06-18T08:05:07.855Z  INFO 91192 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-18T08:05:07.860Z  INFO 91192 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-18T08:05:07.879Z  INFO 91192 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.0)

2025-06-18T08:05:31.228Z  INFO 92384 --- [           main] c.f.fairytale.FairytaleApplication       : Starting FairytaleApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 92384 (/opt/fairytale/spring_boot/build/libs/fairytale-0.0.1-SNAPSHOT.jar started by ubuntu in /opt/fairytale)
2025-06-18T08:05:31.244Z  INFO 92384 --- [           main] c.f.fairytale.FairytaleApplication       : No active profile set, falling back to 1 default profile: "default"
2025-06-18T08:05:33.423Z  INFO 92384 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-18T08:05:33.611Z  INFO 92384 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 172 ms. Found 12 JPA repository interfaces.
2025-06-18T08:05:35.045Z  INFO 92384 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-18T08:05:35.091Z  INFO 92384 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-18T08:05:35.092Z  INFO 92384 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-18T08:05:35.156Z  INFO 92384 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-18T08:05:35.158Z  INFO 92384 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3723 ms
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
2025-06-18T08:05:35.370Z  INFO 92384 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-18T08:05:36.120Z  INFO 92384 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@643ecfef
2025-06-18T08:05:36.123Z  INFO 92384 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-18T08:05:36.309Z  INFO 92384 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-18T08:05:36.426Z  INFO 92384 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-18T08:05:36.532Z  INFO 92384 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-18T08:05:37.452Z  INFO 92384 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-18T08:05:37.647Z  INFO 92384 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.4
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-18T08:05:39.882Z  INFO 92384 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-18T08:05:40.963Z  INFO 92384 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-18T08:05:41.814Z  INFO 92384 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-18T08:05:45.594Z  WARN 92384 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
✅ [WebConfig] 정적 리소스 핸들러 등록: /coloring/**
2025-06-18T08:05:46.698Z  INFO 92384 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-18T08:05:46.717Z  INFO 92384 --- [           main] c.f.fairytale.FairytaleApplication       : Started FairytaleApplication in 16.822 seconds (process running for 17.935)
2025-06-18T08:05:53.063Z  INFO 92384 --- [0.0-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-18T08:05:53.064Z  INFO 92384 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-18T08:05:53.068Z  INFO 92384 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:05:58.359Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T08:05:58.362Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T08:05:58.362Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T08:05:58.405Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T08:05:58.406Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T08:05:58.424Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T08:05:58.425Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T08:05:58.426Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T08:05:58.427Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T08:05:58.427Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:05:58.427Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:05:58.427Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:05:58.440Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:06:30.188Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:06:30.196Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T08:06:30.248Z  INFO 92384 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 108
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:06:30.628Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 108
2025-06-18T08:06:30.629Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 108
2025-06-18T08:06:30.636Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1598
2025-06-18T08:06:30.637Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1598, voice = onyx, speed = 1.0
2025-06-18T08:06:30.638Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:06:30.638Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T08:06:30.638Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T08:06:30.640Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:06:33.628Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 108
2025-06-18T08:06:33.635Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:06:33.636Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T08:06:33.636Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T08:06:33.637Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:06:42.968Z ERROR 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-18T08:06:42.969Z ERROR 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ 이미지 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-18T08:06:42.973Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔄 더미 이미지로 저장 완료: https://picsum.photos/800/600?random=1750234002969
2025-06-18T08:06:42.973Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ⚠️ 더미 이미지이므로 색칠공부 템플릿 생성 건너뜀
2025-06-18T08:06:43.003Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T08:06:43.003Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Story ID: 108
2025-06-18T08:06:43.003Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-18T08:06:43.004Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750234002969
2025-06-18T08:06:43.004Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T08:06:43.005Z  INFO 92384 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-18T08:06:55.211Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:06:55.212Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-18T08:06:55.321Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 5715840 문자
2025-06-18T08:06:55.322Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 음성 타입: onyx
2025-06-18T08:06:55.359Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4286880 bytes
2025-06-18T08:06:55.379Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_108_1750234015359.mp3
2025-06-18T08:06:55.380Z  INFO 92384 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_108_1750234015359.mp3
2025-06-18T08:06:55.380Z  INFO 92384 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/18/2a84ea9c_temp_voice_108_1750234015359.mp3
2025-06-18T08:06:56.058Z  WARN 92384 --- [0.0-8080-exec-6] com.amazonaws.util.Base64                : JAXB is unavailable. Will fallback to SDK implementation which may be less performant.If you are using Java 9+, you will need to include javax.xml.bind:jaxb-api as a dependency.
2025-06-18T08:06:56.060Z  INFO 92384 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/18/2a84ea9c_temp_voice_108_1750234015359.mp3
2025-06-18T08:06:56.063Z  INFO 92384 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/18/2a84ea9c_temp_voice_108_1750234015359.mp3, 만료시간: 1440분
2025-06-18T08:06:56.069Z  INFO 92384 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2a84ea9c_temp_voice_108_1750234015359.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T080656Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=7ab7f49603d20e76cf0b2fe94de838601e5cfa971d22ecf7c6bc8a703523e55d
2025-06-18T08:06:56.070Z  INFO 92384 --- [0.0-8080-exec-6] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2a84ea9c_temp_voice_108_1750234015359.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T080656Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=7ab7f49603d20e76cf0b2fe94de838601e5cfa971d22ecf7c6bc8a703523e55d
2025-06-18T08:06:56.071Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2a84ea9c_temp_voice_108_1750234015359.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T080656Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=7ab7f49603d20e76cf0b2fe94de838601e5cfa971d22ecf7c6bc8a703523e55d
2025-06-18T08:06:56.073Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-18T08:06:56.073Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2a84ea9c_temp_voice_108_1750234015359.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T080656Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=7ab7f49603d20e76cf0b2fe94de838601e5cfa971d22ecf7c6bc8a703523e55d
2025-06-18T08:06:56.080Z  INFO 92384 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/2a84ea9c_temp_voice_108_1750234015359.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T080656Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=7ab7f49603d20e76cf0b2fe94de838601e5cfa971d22ecf7c6bc8a703523e55d
2025-06-18T08:07:06.937Z  INFO 92384 --- [0.0-8080-exec-8] o.apache.coyote.http11.Http11Processor   : Error parsing HTTP request header
 Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level.

java.lang.IllegalArgumentException: Invalid character found in method name [MGLNDD_3.36.41.71_80800x0a...]. HTTP method names must be tokens
	at org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:403) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:271) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우
🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T08:37:52.373Z  INFO 92384 --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-06-18T08:37:52.384Z  INFO 92384 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-06-18T08:37:52.403Z  INFO 92384 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-18T08:37:52.408Z  INFO 92384 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-18T08:37:52.428Z  INFO 92384 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.0)

2025-06-18T08:38:14.619Z  INFO 92767 --- [           main] c.f.fairytale.FairytaleApplication       : Starting FairytaleApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 92767 (/opt/fairytale/spring_boot/build/libs/fairytale-0.0.1-SNAPSHOT.jar started by ubuntu in /opt/fairytale)
2025-06-18T08:38:14.630Z  INFO 92767 --- [           main] c.f.fairytale.FairytaleApplication       : No active profile set, falling back to 1 default profile: "default"
2025-06-18T08:38:16.937Z  INFO 92767 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-18T08:38:17.111Z  INFO 92767 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 156 ms. Found 12 JPA repository interfaces.
2025-06-18T08:38:18.492Z  INFO 92767 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-18T08:38:18.522Z  INFO 92767 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-18T08:38:18.523Z  INFO 92767 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-18T08:38:18.581Z  INFO 92767 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-18T08:38:18.583Z  INFO 92767 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3780 ms
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
2025-06-18T08:38:18.811Z  INFO 92767 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-18T08:38:19.548Z  INFO 92767 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2ccc9681
2025-06-18T08:38:19.550Z  INFO 92767 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-18T08:38:19.737Z  INFO 92767 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-18T08:38:19.837Z  INFO 92767 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-18T08:38:19.972Z  INFO 92767 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-18T08:38:20.772Z  INFO 92767 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-18T08:38:21.002Z  INFO 92767 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.4
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-18T08:38:23.331Z  INFO 92767 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-18T08:38:24.341Z  INFO 92767 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-18T08:38:25.219Z  INFO 92767 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-18T08:38:28.884Z  WARN 92767 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
✅ [WebConfig] 정적 리소스 핸들러 등록: /coloring/**
2025-06-18T08:38:30.032Z  INFO 92767 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-18T08:38:30.056Z  INFO 92767 --- [           main] c.f.fairytale.FairytaleApplication       : Started FairytaleApplication in 16.829 seconds (process running for 17.922)
2025-06-18T08:38:46.758Z  INFO 92767 --- [0.0-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-18T08:38:46.758Z  INFO 92767 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-18T08:38:46.760Z  INFO 92767 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:38:57.911Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T08:38:57.914Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T08:38:57.915Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T08:38:57.953Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T08:38:57.954Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T08:38:57.971Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T08:38:57.972Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T08:38:57.972Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T08:38:57.973Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T08:38:57.973Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:38:57.973Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:38:57.974Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:38:57.985Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:38:58.060Z ERROR 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T08:38:58.065Z ERROR 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:39:20.077Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T08:39:20.081Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T08:39:20.081Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T08:39:20.086Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T08:39:20.087Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T08:39:20.090Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T08:39:20.090Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T08:39:20.090Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T08:39:20.091Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T08:39:20.091Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:39:20.091Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:39:20.091Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:39:20.091Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:39:20.095Z ERROR 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T08:39:20.097Z ERROR 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:40:13.695Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T08:40:13.698Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T08:40:13.698Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T08:40:13.705Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T08:40:13.705Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T08:40:13.710Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T08:40:13.711Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T08:40:13.711Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T08:40:13.711Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T08:40:13.711Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:40:13.711Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:40:13.711Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:40:13.717Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:40:13.728Z ERROR 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T08:40:13.731Z ERROR 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:40:15.212Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T08:40:15.216Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T08:40:15.216Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T08:40:15.223Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T08:40:15.223Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T08:40:15.227Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T08:40:15.227Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T08:40:15.227Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T08:40:15.227Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T08:40:15.227Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:40:15.227Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:40:15.227Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:40:15.228Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:40:15.233Z ERROR 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T08:40:15.235Z ERROR 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:40:23.420Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T08:40:23.422Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T08:40:23.422Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T08:40:23.428Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T08:40:23.428Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T08:40:23.431Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T08:40:23.432Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T08:40:23.432Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T08:40:23.432Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T08:40:23.432Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:40:23.432Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:40:23.432Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:40:23.432Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:40:23.436Z ERROR 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T08:40:23.438Z ERROR 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT 생성 - Username: kakao_4287771333, Nickname: 나현_1
🔍 JWT 생성 - Username: kakao_4287771333, Nickname: 나현_1
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T08:44:55.357Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T08:44:55.359Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T08:44:55.359Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=사랑, voice=ash, babyId=1
2025-06-18T08:44:55.364Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T08:44:55.365Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T08:44:55.368Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T08:44:55.368Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T08:44:55.368Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T08:44:55.368Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='사랑 동화'
2025-06-18T08:44:55.368Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:44:55.369Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:44:55.369Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:44:55.369Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:44:55.372Z ERROR 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T08:44:55.374Z ERROR 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T08:45:00.818Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.users.UsersController      : 🔍 사용자 프로필 조회: userId=1
2025-06-18T08:45:00.818Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.users.UsersService         : 🔍 [UsersService] 사용자 정보 조회: userId=1
2025-06-18T08:45:00.832Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.users.UsersService         : ✅ [UsersService] 사용자 정보 조회 성공: userId=1
2025-06-18T08:45:00.833Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.users.UsersController      : ✅ 사용자 프로필 조회 성공: userId=1, profileImageUrl=https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/profile-images/user-1-20250612-174717-5560ab3e.jpg
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T08:48:46.140Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T08:48:46.143Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T08:48:46.144Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=가족, voice=shimmer, babyId=1
2025-06-18T08:48:46.150Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T08:48:46.150Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T08:48:46.154Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T08:48:46.154Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T08:48:46.154Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T08:48:46.154Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='가족 동화'
2025-06-18T08:48:46.155Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:48:46.155Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:48:46.155Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:48:46.155Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:48:46.159Z ERROR 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T08:48:46.161Z ERROR 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T08:50:39.058Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T08:50:39.060Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T08:50:39.060Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=가족, voice=shimmer, babyId=1
2025-06-18T08:50:39.066Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T08:50:39.066Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T08:50:39.069Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T08:50:39.069Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T08:50:39.070Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T08:50:39.070Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='가족 동화'
2025-06-18T08:50:39.070Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:50:39.070Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:50:39.070Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:50:39.070Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:50:39.074Z ERROR 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T08:50:39.076Z ERROR 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-18T08:50:52.454Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-18T08:50:52.456Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-18T08:50:52.456Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=가족, voice=nova, babyId=1
2025-06-18T08:50:52.461Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-18T08:50:52.461Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-18T08:50:52.463Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-18T08:50:52.464Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-18T08:50:52.464Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-18T08:50:52.464Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='가족 동화'
2025-06-18T08:50:52.464Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:50:52.464Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:50:52.464Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:50:52.464Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:50:52.467Z ERROR 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
2025-06-18T08:50:52.469Z ERROR 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: FastAPI 호출 실패: 502 Bad Gateway on POST request for "http://3.36.41.71/ai/generate/story": "<html><EOL><EOL><head><title>502 Bad Gateway</title></head><EOL><EOL><body><EOL><EOL><center><h1>502 Bad Gateway</h1></center><EOL><EOL><hr><center>nginx/1.18.0 (Ubuntu)</center><EOL><EOL></body><EOL><EOL></html><EOL><EOL>"
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:53:50.263Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T08:53:50.265Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T08:53:50.265Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=fable, babyId=2
2025-06-18T08:53:50.269Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T08:53:50.270Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T08:53:50.272Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T08:53:50.272Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T08:53:50.272Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T08:53:50.272Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T08:53:50.272Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:53:50.272Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:53:50.272Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:53:50.273Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:54:20.145Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:54:20.153Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T08:54:20.183Z  INFO 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 112
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:54:20.322Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 112
2025-06-18T08:54:20.322Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 112
2025-06-18T08:54:20.327Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1652
2025-06-18T08:54:20.328Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1652, voice = fable, speed = 1.0
2025-06-18T08:54:20.328Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:54:20.328Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T08:54:20.328Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T08:54:20.331Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:54:24.240Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 112
2025-06-18T08:54:24.246Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:54:24.246Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T08:54:24.247Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T08:54:24.248Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:54:34.771Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:54:34.771Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-18T08:54:34.771Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image_2.png"}
2025-06-18T08:54:34.772Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-18T08:54:34.772Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image_2.png
2025-06-18T08:54:34.772Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image_2.png
2025-06-18T08:54:34.772Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image_2.png
2025-06-18T08:54:34.772Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image_2.png
2025-06-18T08:54:34.772Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image_2.png
2025-06-18T08:54:34.772Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image_2.png
2025-06-18T08:54:34.772Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image_2.png
2025-06-18T08:54:34.772Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image_2.png
2025-06-18T08:54:34.773Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image_2.png
2025-06-18T08:54:34.773Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image_2.png
2025-06-18T08:54:34.773Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image_2.png
2025-06-18T08:54:34.773Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image_2.png
2025-06-18T08:54:34.773Z  WARN 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-18T08:54:34.773Z ERROR 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image_2.png
2025-06-18T08:54:34.774Z ERROR 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image_2.png
2025-06-18T08:54:34.774Z ERROR 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-18T08:54:34.775Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-18T08:54:34.882Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 112
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 112
2025-06-18T08:54:34.890Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750236874774
2025-06-18T08:54:34.891Z  WARN 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750236874774
2025-06-18T08:54:34.905Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T08:54:34.906Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Story ID: 112
2025-06-18T08:54:34.907Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-18T08:54:34.908Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750236874774
2025-06-18T08:54:34.909Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T08:54:34.909Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-18T08:54:44.445Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:54:44.445Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-18T08:54:44.532Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 5904000 문자
2025-06-18T08:54:44.533Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 음성 타입: fable
2025-06-18T08:54:44.574Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4428000 bytes
2025-06-18T08:54:44.612Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_112_1750236884574.mp3
2025-06-18T08:54:44.612Z  INFO 92767 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_112_1750236884574.mp3
2025-06-18T08:54:44.613Z  INFO 92767 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/18/3ea32933_temp_voice_112_1750236884574.mp3
2025-06-18T08:54:45.141Z  WARN 92767 --- [0.0-8080-exec-7] com.amazonaws.util.Base64                : JAXB is unavailable. Will fallback to SDK implementation which may be less performant.If you are using Java 9+, you will need to include javax.xml.bind:jaxb-api as a dependency.
2025-06-18T08:54:45.143Z  INFO 92767 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/18/3ea32933_temp_voice_112_1750236884574.mp3
2025-06-18T08:54:45.143Z  INFO 92767 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/18/3ea32933_temp_voice_112_1750236884574.mp3, 만료시간: 1440분
2025-06-18T08:54:45.146Z  INFO 92767 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/3ea32933_temp_voice_112_1750236884574.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085445Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1b4d20250705184a177c0e1f013af324ba3a71cf9f323f3e659be3c2712768da
2025-06-18T08:54:45.147Z  INFO 92767 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/3ea32933_temp_voice_112_1750236884574.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085445Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1b4d20250705184a177c0e1f013af324ba3a71cf9f323f3e659be3c2712768da
2025-06-18T08:54:45.147Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/3ea32933_temp_voice_112_1750236884574.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085445Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1b4d20250705184a177c0e1f013af324ba3a71cf9f323f3e659be3c2712768da
2025-06-18T08:54:45.148Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-18T08:54:45.149Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/3ea32933_temp_voice_112_1750236884574.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085445Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1b4d20250705184a177c0e1f013af324ba3a71cf9f323f3e659be3c2712768da
2025-06-18T08:54:45.164Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/3ea32933_temp_voice_112_1750236884574.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085445Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=1b4d20250705184a177c0e1f013af324ba3a71cf9f323f3e659be3c2712768da
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:57:27.595Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T08:57:27.598Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T08:57:27.598Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T08:57:27.604Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T08:57:27.605Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T08:57:27.608Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T08:57:27.609Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T08:57:27.609Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T08:57:27.610Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T08:57:27.610Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:57:27.610Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:57:27.610Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:57:27.611Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:57:58.550Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:57:58.551Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T08:57:58.557Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 113
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:57:58.636Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 113
2025-06-18T08:57:58.637Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 113
2025-06-18T08:57:58.641Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1855
2025-06-18T08:57:58.641Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1855, voice = onyx, speed = 1.0
2025-06-18T08:57:58.642Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:57:58.642Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T08:57:58.642Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T08:57:58.642Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:58:03.986Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 113
2025-06-18T08:58:03.993Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:58:03.997Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T08:58:03.998Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T08:58:04.019Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:58:15.384Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:58:15.384Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-18T08:58:15.384Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image_3.png"}
2025-06-18T08:58:15.385Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-18T08:58:15.385Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image_3.png
2025-06-18T08:58:15.385Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image_3.png
2025-06-18T08:58:15.385Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image_3.png
2025-06-18T08:58:15.385Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image_3.png
2025-06-18T08:58:15.385Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image_3.png
2025-06-18T08:58:15.385Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image_3.png
2025-06-18T08:58:15.385Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image_3.png
2025-06-18T08:58:15.385Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image_3.png
2025-06-18T08:58:15.386Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image_3.png
2025-06-18T08:58:15.386Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image_3.png
2025-06-18T08:58:15.386Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image_3.png
2025-06-18T08:58:15.386Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image_3.png
2025-06-18T08:58:15.386Z  WARN 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-18T08:58:15.386Z ERROR 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image_3.png
2025-06-18T08:58:15.386Z ERROR 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image_3.png
2025-06-18T08:58:15.386Z ERROR 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-18T08:58:15.387Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-18T08:58:15.401Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 113
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 113
2025-06-18T08:58:15.406Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750237095386
2025-06-18T08:58:15.406Z  WARN 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750237095386
2025-06-18T08:58:15.411Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T08:58:15.412Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Story ID: 113
2025-06-18T08:58:15.412Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-18T08:58:15.412Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750237095386
2025-06-18T08:58:15.412Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T08:58:15.412Z  INFO 92767 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-18T08:58:30.802Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:58:30.802Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-18T08:58:30.863Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 6600960 문자
2025-06-18T08:58:30.863Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 음성 타입: onyx
2025-06-18T08:58:30.895Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4950720 bytes
2025-06-18T08:58:30.904Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_113_1750237110895.mp3
2025-06-18T08:58:30.905Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_113_1750237110895.mp3
2025-06-18T08:58:30.906Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/18/02d30c86_temp_voice_113_1750237110895.mp3
2025-06-18T08:58:31.209Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/18/02d30c86_temp_voice_113_1750237110895.mp3
2025-06-18T08:58:31.210Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/18/02d30c86_temp_voice_113_1750237110895.mp3, 만료시간: 1440분
2025-06-18T08:58:31.211Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/02d30c86_temp_voice_113_1750237110895.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085831Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=014451f4bceb5223604678b6eee8f48dd58247c60e07172bd6909656808f2c0c
2025-06-18T08:58:31.211Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/02d30c86_temp_voice_113_1750237110895.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085831Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=014451f4bceb5223604678b6eee8f48dd58247c60e07172bd6909656808f2c0c
2025-06-18T08:58:31.211Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/02d30c86_temp_voice_113_1750237110895.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085831Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=014451f4bceb5223604678b6eee8f48dd58247c60e07172bd6909656808f2c0c
2025-06-18T08:58:31.212Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-18T08:58:31.212Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/02d30c86_temp_voice_113_1750237110895.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085831Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=014451f4bceb5223604678b6eee8f48dd58247c60e07172bd6909656808f2c0c
2025-06-18T08:58:31.217Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/02d30c86_temp_voice_113_1750237110895.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085831Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=014451f4bceb5223604678b6eee8f48dd58247c60e07172bd6909656808f2c0c
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:59:02.198Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T08:59:02.216Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T08:59:02.218Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=자연, voice=fable, babyId=2
2025-06-18T08:59:02.248Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T08:59:02.249Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T08:59:02.265Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T08:59:02.265Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T08:59:02.265Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T08:59:02.265Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='자연 동화'
2025-06-18T08:59:02.268Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:59:02.269Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T08:59:02.270Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T08:59:02.272Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:59:24.826Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:59:24.827Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T08:59:24.831Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 114
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:59:24.884Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 114
2025-06-18T08:59:24.885Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 114
2025-06-18T08:59:24.888Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1316
2025-06-18T08:59:24.889Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1316, voice = fable, speed = 1.0
2025-06-18T08:59:24.889Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:59:24.889Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T08:59:24.890Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T08:59:24.890Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T08:59:27.393Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 114
2025-06-18T08:59:27.396Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T08:59:27.397Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T08:59:27.397Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T08:59:27.398Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T08:59:35.921Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:59:35.921Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-18T08:59:35.921Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image_4.png"}
2025-06-18T08:59:35.921Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-18T08:59:35.921Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image_4.png
2025-06-18T08:59:35.922Z  WARN 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-18T08:59:35.922Z ERROR 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image_4.png
2025-06-18T08:59:35.922Z ERROR 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image_4.png
2025-06-18T08:59:35.923Z ERROR 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-18T08:59:35.923Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-18T08:59:35.933Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 114
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 114
2025-06-18T08:59:35.938Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750237175923
2025-06-18T08:59:35.938Z  WARN 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750237175923
2025-06-18T08:59:35.943Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T08:59:35.944Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Story ID: 114
2025-06-18T08:59:35.944Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Title: 자연 동화
2025-06-18T08:59:35.944Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750237175923
2025-06-18T08:59:35.944Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T08:59:35.944Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-18T08:59:43.602Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T08:59:43.602Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-18T08:59:43.631Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 4660480 문자
2025-06-18T08:59:43.631Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 음성 타입: fable
2025-06-18T08:59:43.643Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 3495360 bytes
2025-06-18T08:59:43.648Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_114_1750237183643.mp3
2025-06-18T08:59:43.648Z  INFO 92767 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_114_1750237183643.mp3
2025-06-18T08:59:43.648Z  INFO 92767 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/18/97bcd618_temp_voice_114_1750237183643.mp3
2025-06-18T08:59:43.830Z  INFO 92767 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/18/97bcd618_temp_voice_114_1750237183643.mp3
2025-06-18T08:59:43.830Z  INFO 92767 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/18/97bcd618_temp_voice_114_1750237183643.mp3, 만료시간: 1440분
2025-06-18T08:59:43.831Z  INFO 92767 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/97bcd618_temp_voice_114_1750237183643.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085943Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=45caf5420b9c46319716f289e5c4d3bd88b5205e473fd18b557a1b5eb9026d47
2025-06-18T08:59:43.831Z  INFO 92767 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/97bcd618_temp_voice_114_1750237183643.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085943Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=45caf5420b9c46319716f289e5c4d3bd88b5205e473fd18b557a1b5eb9026d47
2025-06-18T08:59:43.832Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/97bcd618_temp_voice_114_1750237183643.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085943Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=45caf5420b9c46319716f289e5c4d3bd88b5205e473fd18b557a1b5eb9026d47
2025-06-18T08:59:43.833Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-18T08:59:43.833Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/97bcd618_temp_voice_114_1750237183643.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085943Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=45caf5420b9c46319716f289e5c4d3bd88b5205e473fd18b557a1b5eb9026d47
2025-06-18T08:59:43.839Z  INFO 92767 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/97bcd618_temp_voice_114_1750237183643.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T085943Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=45caf5420b9c46319716f289e5c4d3bd88b5205e473fd18b557a1b5eb9026d47
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T09:02:22.949Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.share.ShareController      : 🎬 Stories 공유 요청 - StoryId: 114, 사용자: kakao_4290101000
2025-06-18T09:02:22.952Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.share.ShareService         : 🎬 Stories에서 공유 시작 - StoryId: 114, 사용자: kakao_4290101000
2025-06-18T09:02:22.969Z ERROR 92767 --- [0.0-8080-exec-3] c.f.fairytale.share.ShareController      : ❌ Stories 공유 실패: 이미지가 없는 스토리는 공유할 수 없습니다.
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T09:13:05.813Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T09:13:05.815Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T09:13:05.815Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=fable, babyId=2
2025-06-18T09:13:05.825Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T09:13:05.825Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T09:13:05.829Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T09:13:05.829Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T09:13:05.829Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T09:13:05.829Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T09:13:05.829Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T09:13:05.830Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T09:13:05.830Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T09:13:05.830Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T09:13:39.048Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T09:13:39.049Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T09:13:39.061Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 115
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T09:13:39.296Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 115
2025-06-18T09:13:39.297Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 115
2025-06-18T09:13:39.301Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1887
2025-06-18T09:13:39.301Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1887, voice = fable, speed = 1.0
2025-06-18T09:13:39.302Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T09:13:39.302Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T09:13:39.302Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T09:13:39.302Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T09:13:47.724Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 115
2025-06-18T09:13:47.728Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T09:13:47.729Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T09:13:47.729Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T09:13:47.730Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T09:13:59.648Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T09:13:59.648Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-18T09:13:59.648Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image_5.png"}
2025-06-18T09:13:59.648Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image_5.png
2025-06-18T09:13:59.649Z  WARN 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-18T09:13:59.649Z ERROR 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image_5.png
2025-06-18T09:13:59.650Z ERROR 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image_5.png
2025-06-18T09:13:59.650Z ERROR 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-18T09:13:59.652Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-18T09:13:59.665Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 115
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 115
2025-06-18T09:13:59.670Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750238039650
2025-06-18T09:13:59.670Z  WARN 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750238039650
2025-06-18T09:13:59.676Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T09:13:59.676Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Story ID: 115
2025-06-18T09:13:59.676Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-18T09:13:59.676Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750238039650
2025-06-18T09:13:59.676Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T09:13:59.676Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-18T09:14:27.983Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T09:14:27.983Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-18T09:14:28.039Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 6666880 문자
2025-06-18T09:14:28.040Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 음성 타입: fable
2025-06-18T09:14:28.057Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 5000160 bytes
2025-06-18T09:14:28.066Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_115_1750238068057.mp3
2025-06-18T09:14:28.067Z  INFO 92767 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_115_1750238068057.mp3
2025-06-18T09:14:28.067Z  INFO 92767 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/18/894c4144_temp_voice_115_1750238068057.mp3
2025-06-18T09:14:28.307Z  INFO 92767 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/18/894c4144_temp_voice_115_1750238068057.mp3
2025-06-18T09:14:28.307Z  INFO 92767 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/18/894c4144_temp_voice_115_1750238068057.mp3, 만료시간: 1440분
2025-06-18T09:14:28.308Z  INFO 92767 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/894c4144_temp_voice_115_1750238068057.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T091428Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a98069e0478ca65de441e9df22de12c67751a8af091649bc250f14427bb788fd
2025-06-18T09:14:28.308Z  INFO 92767 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/894c4144_temp_voice_115_1750238068057.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T091428Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a98069e0478ca65de441e9df22de12c67751a8af091649bc250f14427bb788fd
2025-06-18T09:14:28.308Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/894c4144_temp_voice_115_1750238068057.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T091428Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a98069e0478ca65de441e9df22de12c67751a8af091649bc250f14427bb788fd
2025-06-18T09:14:28.309Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-18T09:14:28.309Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/894c4144_temp_voice_115_1750238068057.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T091428Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a98069e0478ca65de441e9df22de12c67751a8af091649bc250f14427bb788fd
2025-06-18T09:14:28.318Z  INFO 92767 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/894c4144_temp_voice_115_1750238068057.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T091428Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a98069e0478ca65de441e9df22de12c67751a8af091649bc250f14427bb788fd
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-18T09:26:10.302Z ERROR 92767 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: Cannot invoke "org.springframework.security.core.Authentication.getName()" because "auth" is null
2025-06-18T09:26:11.602Z ERROR 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: Cannot invoke "org.springframework.security.core.Authentication.getName()" because "auth" is null
2025-06-18T09:26:12.191Z ERROR 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: Cannot invoke "org.springframework.security.core.Authentication.getName()" because "auth" is null
2025-06-18T09:26:13.894Z ERROR 92767 --- [0.0-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: 토큰 갱신 중 오류 발생] with root cause

java.lang.RuntimeException: 리프레시 토큰이 일치하지 않습니다.
	at com.fairytale.fairytale.auth.service.OAuthService.refreshTokens(OAuthService.java:337) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at com.fairytale.fairytale.auth.service.OAuthService$$SpringCGLIB$$0.refreshTokens(<generated>) ~[!/:0.0.1-SNAPSHOT]
	at com.fairytale.fairytale.auth.controller.OAuthController.refreshToken(OAuthController.java:62) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at com.fairytale.fairytale.auth.strategy.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:31) ~[!/:0.0.1-SNAPSHOT]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-06-18T09:26:18.145Z  INFO 92767 --- [0.0-8080-exec-9] c.f.f.auth.controller.OAuthController    : OAuth 로그인 요청 - Provider: kakao
🔍 OAuth 로그인 시작 - Provider: kakao
🔍 사용자명 중복으로 인한 변경: kakao_4290101000_1
🔍 닉네임 중복으로 인한 변경: 옥현우_1
🔍 소셜 로그인 사용자 정보: kakao_4290101000_1
🔍 saveOrUpdateUser 시작 - 이메일: dnflsmstltk12@daum.net
🔍 USER 역할 찾는 중...
🔍 USER 역할 조회 완료
🔍 사용자 역할 설정 완료: USER
🔍 이메일로 사용자 찾는 중: dnflsmstltk12@daum.net
🔍 이메일 조회 결과: 발견
🔍 기존 사용자 업데이트: kakao_4290101000
🔍 DB 저장 완료 - ID: 2, Username: kakao_4290101000
🔍 JWT 토큰 생성 - Username: kakao_4290101000, Nickname: 옥현우_1
🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우_1
🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우_1
🔍 JWT 토큰 발급 완료
2025-06-18T09:26:18.319Z  INFO 92767 --- [0.0-8080-exec-9] c.f.f.auth.controller.OAuthController    : OAuth 로그인 성공 - Provider: kakao
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T09:26:22.106Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-18T09:26:22.108Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-18T09:26:22.108Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-18T09:26:22.115Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-18T09:26:22.116Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-18T09:26:22.119Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-18T09:26:22.119Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-18T09:26:22.119Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-18T09:26:22.120Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-18T09:26:22.120Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T09:26:22.120Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-18T09:26:22.120Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-18T09:26:22.120Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T09:26:54.363Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T09:26:54.364Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-18T09:26:54.371Z  INFO 92767 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 116
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T09:26:54.437Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 116
2025-06-18T09:26:54.438Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 116
2025-06-18T09:26:54.441Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1763
2025-06-18T09:26:54.442Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1763, voice = onyx, speed = 1.0
2025-06-18T09:26:54.442Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T09:26:54.443Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-18T09:26:54.443Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-18T09:26:54.443Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-18T09:27:00.891Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 116
2025-06-18T09:27:00.897Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-18T09:27:00.897Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-18T09:27:00.897Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-18T09:27:00.898Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-18T09:27:10.840Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T09:27:10.840Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-18T09:27:10.840Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image_6.png"}
2025-06-18T09:27:10.840Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-18T09:27:10.840Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image_6.png
2025-06-18T09:27:10.840Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image_6.png
2025-06-18T09:27:10.840Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image_6.png
2025-06-18T09:27:10.840Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image_6.png
2025-06-18T09:27:10.841Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image_6.png
2025-06-18T09:27:10.841Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image_6.png
2025-06-18T09:27:10.841Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image_6.png
2025-06-18T09:27:10.841Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image_6.png
2025-06-18T09:27:10.841Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image_6.png
2025-06-18T09:27:10.841Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image_6.png
2025-06-18T09:27:10.841Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image_6.png
2025-06-18T09:27:10.841Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image_6.png
2025-06-18T09:27:10.841Z  WARN 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-18T09:27:10.841Z ERROR 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image_6.png
2025-06-18T09:27:10.841Z ERROR 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image_6.png
2025-06-18T09:27:10.841Z ERROR 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-18T09:27:10.842Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-18T09:27:10.854Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 116
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 116
2025-06-18T09:27:10.858Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750238830841
2025-06-18T09:27:10.859Z  WARN 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750238830841
2025-06-18T09:27:10.865Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-18T09:27:10.866Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Story ID: 116
2025-06-18T09:27:10.866Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-18T09:27:10.866Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750238830841
2025-06-18T09:27:10.866Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-18T09:27:10.866Z  INFO 92767 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-18T09:27:38.167Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-18T09:27:38.167Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-18T09:27:38.225Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 6325120 문자
2025-06-18T09:27:38.226Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 음성 타입: onyx
2025-06-18T09:27:38.259Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4743840 bytes
2025-06-18T09:27:38.275Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_116_1750238858259.mp3
2025-06-18T09:27:38.275Z  INFO 92767 --- [.0-8080-exec-10] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_116_1750238858259.mp3
2025-06-18T09:27:38.275Z  INFO 92767 --- [.0-8080-exec-10] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/18/63cf0d41_temp_voice_116_1750238858259.mp3
2025-06-18T09:27:38.541Z  INFO 92767 --- [.0-8080-exec-10] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/18/63cf0d41_temp_voice_116_1750238858259.mp3
2025-06-18T09:27:38.541Z  INFO 92767 --- [.0-8080-exec-10] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/18/63cf0d41_temp_voice_116_1750238858259.mp3, 만료시간: 1440분
2025-06-18T09:27:38.542Z  INFO 92767 --- [.0-8080-exec-10] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/63cf0d41_temp_voice_116_1750238858259.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T092738Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=65a8a79081bdfdb66c6739d30076cff07bc3b1c917de5f0aec556c66353e5541
2025-06-18T09:27:38.542Z  INFO 92767 --- [.0-8080-exec-10] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/63cf0d41_temp_voice_116_1750238858259.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T092738Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=65a8a79081bdfdb66c6739d30076cff07bc3b1c917de5f0aec556c66353e5541
2025-06-18T09:27:38.542Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/63cf0d41_temp_voice_116_1750238858259.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T092738Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=65a8a79081bdfdb66c6739d30076cff07bc3b1c917de5f0aec556c66353e5541
2025-06-18T09:27:38.543Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-18T09:27:38.543Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/63cf0d41_temp_voice_116_1750238858259.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T092738Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=65a8a79081bdfdb66c6739d30076cff07bc3b1c917de5f0aec556c66353e5541
2025-06-18T09:27:38.564Z  INFO 92767 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/18/63cf0d41_temp_voice_116_1750238858259.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250618T092738Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250618%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=65a8a79081bdfdb66c6739d30076cff07bc3b1c917de5f0aec556c66353e5541
2025-06-18T10:24:35.365Z  INFO 92767 --- [.0-8080-exec-10] o.apache.coyote.http11.Http11Processor   : Error parsing HTTP request header
 Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level.

java.lang.IllegalArgumentException: Invalid character found in method name [0x040x010x00P0x8e]0x8e0x1100x00...]. HTTP method names must be tokens
	at org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:403) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:271) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우_1
🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우_1
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T00:54:44.507Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-19T00:54:44.509Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-19T00:54:44.509Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-19T00:54:44.513Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-19T00:54:44.513Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-19T00:54:44.515Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-19T00:54:44.515Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-19T00:54:44.515Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-19T00:54:44.516Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-19T00:54:44.516Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T00:54:44.516Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-19T00:54:44.516Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-19T00:54:44.516Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T00:55:02.252Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T00:55:02.253Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-19T00:55:02.281Z  INFO 92767 --- [0.0-8080-exec-3] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 117
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T00:55:02.337Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 117
2025-06-19T00:55:02.338Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 117
2025-06-19T00:55:02.342Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1603
2025-06-19T00:55:02.343Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1603, voice = onyx, speed = 1.0
2025-06-19T00:55:02.343Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T00:55:02.343Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-19T00:55:02.343Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-19T00:55:02.343Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T00:55:43.098Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T00:55:43.098Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-19T00:55:43.126Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 5742080 문자
2025-06-19T00:55:43.127Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 음성 타입: onyx
2025-06-19T00:55:43.136Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4306560 bytes
2025-06-19T00:55:43.143Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_117_1750294543136.mp3
2025-06-19T00:55:43.143Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_117_1750294543136.mp3
2025-06-19T00:55:43.143Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/19/80d0ba9f_temp_voice_117_1750294543136.mp3
2025-06-19T00:55:43.405Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/19/80d0ba9f_temp_voice_117_1750294543136.mp3
2025-06-19T00:55:43.405Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/19/80d0ba9f_temp_voice_117_1750294543136.mp3, 만료시간: 1440분
2025-06-19T00:55:43.406Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/80d0ba9f_temp_voice_117_1750294543136.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T005543Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=858f0987aa50382455f0e15875acac0e264888da980d65a672ead8ae3d781f9d
2025-06-19T00:55:43.406Z  INFO 92767 --- [0.0-8080-exec-4] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/80d0ba9f_temp_voice_117_1750294543136.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T005543Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=858f0987aa50382455f0e15875acac0e264888da980d65a672ead8ae3d781f9d
2025-06-19T00:55:43.406Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/80d0ba9f_temp_voice_117_1750294543136.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T005543Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=858f0987aa50382455f0e15875acac0e264888da980d65a672ead8ae3d781f9d
2025-06-19T00:55:43.407Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-19T00:55:43.407Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/80d0ba9f_temp_voice_117_1750294543136.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T005543Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=858f0987aa50382455f0e15875acac0e264888da980d65a672ead8ae3d781f9d
2025-06-19T00:55:43.415Z  INFO 92767 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/80d0ba9f_temp_voice_117_1750294543136.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T005543Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=858f0987aa50382455f0e15875acac0e264888da980d65a672ead8ae3d781f9d
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T00:55:47.786Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 117
2025-06-19T00:55:47.790Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T00:55:47.790Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-19T00:55:47.790Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-19T00:55:47.790Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T00:56:01.000Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image_7.png"}
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image_7.png
2025-06-19T00:56:01.001Z  WARN 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-19T00:56:01.001Z ERROR 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image_7.png
2025-06-19T00:56:01.002Z ERROR 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image_7.png
2025-06-19T00:56:01.002Z ERROR 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-19T00:56:01.002Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-19T00:56:01.016Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 117
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 117
2025-06-19T00:56:01.022Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750294561002
2025-06-19T00:56:01.022Z  WARN 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750294561002
2025-06-19T00:56:01.041Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-19T00:56:01.042Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Story ID: 117
2025-06-19T00:56:01.042Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-19T00:56:01.042Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750294561002
2025-06-19T00:56:01.044Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-19T00:56:01.044Z  INFO 92767 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Voice Content: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/80d0ba9f_temp_voice_117_1750294543136.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T005543Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=858f0987aa50382455f0e15875acac0e264888da980d65a672ead8ae3d781f9d
2025-06-19T00:58:17.468Z  INFO 92767 --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-06-19T00:58:17.471Z  INFO 92767 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-06-19T00:58:17.484Z  INFO 92767 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-19T00:58:17.488Z  INFO 92767 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-19T00:58:17.507Z  INFO 92767 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.0)

2025-06-19T01:01:29.045Z  INFO 95491 --- [           main] c.f.fairytale.FairytaleApplication       : Starting FairytaleApplication v0.0.1-SNAPSHOT using Java 17.0.15 with PID 95491 (/opt/fairytale/spring_boot/build/libs/fairytale-0.0.1-SNAPSHOT.jar started by ubuntu in /opt/fairytale)
2025-06-19T01:01:29.058Z  INFO 95491 --- [           main] c.f.fairytale.FairytaleApplication       : No active profile set, falling back to 1 default profile: "default"
2025-06-19T01:01:32.925Z  INFO 95491 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-19T01:01:33.301Z  INFO 95491 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 338 ms. Found 12 JPA repository interfaces.
2025-06-19T01:01:36.178Z  INFO 95491 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-19T01:01:36.244Z  INFO 95491 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-19T01:01:36.245Z  INFO 95491 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-19T01:01:36.361Z  INFO 95491 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-19T01:01:36.363Z  INFO 95491 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7109 ms
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
2025-06-19T01:01:36.749Z  INFO 95491 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-19T01:01:38.157Z  INFO 95491 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6e807e2
2025-06-19T01:01:38.161Z  INFO 95491 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-19T01:01:38.516Z  INFO 95491 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-19T01:01:38.784Z  INFO 95491 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-19T01:01:38.932Z  INFO 95491 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-19T01:01:40.389Z  INFO 95491 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-19T01:01:40.755Z  INFO 95491 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.4
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-19T01:01:45.072Z  INFO 95491 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-19T01:01:46.271Z  INFO 95491 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-19T01:01:47.784Z  INFO 95491 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-19T01:01:53.707Z  WARN 95491 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
✅ [WebConfig] 정적 리소스 핸들러 등록: /coloring/**
2025-06-19T01:01:55.627Z  INFO 95491 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-19T01:01:55.674Z  INFO 95491 --- [           main] c.f.fairytale.FairytaleApplication       : Started FairytaleApplication in 28.91 seconds (process running for 31.095)
2025-06-19T01:06:02.605Z  INFO 95491 --- [0.0-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-19T01:06:02.606Z  INFO 95491 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-19T01:06:02.612Z  INFO 95491 --- [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
2025-06-19T01:41:50.209Z  INFO 95491 --- [0.0-8080-exec-1] c.f.f.coloring.ColoringController        : 🔍 색칠공부 템플릿 목록 조회 요청 - page: 0, size: 20
🔍 [ColoringTemplateService] 색칠공부 템플릿 목록 조회
2025-06-19T01:41:50.253Z  INFO 95491 --- [0.0-8080-exec-1] c.f.f.coloring.ColoringController        : ✅ 색칠공부 템플릿 2개 조회 성공
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T01:42:12.790Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareController      : 🔍 모든 공유 게시물 조회 요청 - 현재 사용자: kakao_4290101000
2025-06-19T01:42:12.791Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : 🔍 모든 공유 게시물 조회
2025-06-19T01:42:12.847Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : 🔍 사용자 표시명 생성 - Username: kakao_4287771333
2025-06-19T01:42:12.861Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : ✅ 아기 이름으로 표시명 생성: 곰돌이의 부모
2025-06-19T01:42:12.884Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : 🔍 사용자 표시명 생성 - Username: kakao_4287771333
2025-06-19T01:42:12.893Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : ✅ 아기 이름으로 표시명 생성: 곰돌이의 부모
2025-06-19T01:42:12.903Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : 🔍 사용자 표시명 생성 - Username: kakao_4287771333
2025-06-19T01:42:12.913Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : ✅ 아기 이름으로 표시명 생성: 곰돌이의 부모
2025-06-19T01:42:12.927Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : 🔍 사용자 표시명 생성 - Username: kakao_4287771333
2025-06-19T01:42:12.935Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : ✅ 아기 이름으로 표시명 생성: 곰돌이의 부모
2025-06-19T01:42:12.945Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : 🔍 사용자 표시명 생성 - Username: kakao_4290101000
2025-06-19T01:42:12.957Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : ✅ 아기 이름으로 표시명 생성: 다다의 부모
2025-06-19T01:42:12.966Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : 🔍 사용자 표시명 생성 - Username: kakao_4287771333
2025-06-19T01:42:12.974Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : ✅ 아기 이름으로 표시명 생성: 곰돌이의 부모
2025-06-19T01:42:12.986Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : 🔍 사용자 표시명 생성 - Username: kakao_4287771333
2025-06-19T01:42:12.994Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareService         : ✅ 아기 이름으로 표시명 생성: 곰돌이의 부모
2025-06-19T01:42:13.008Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.share.ShareController      : ✅ 공유 게시물 조회 완료 - 개수: 7, 요청자: kakao_4290101000
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T01:42:17.722Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.gallery.GalleryController  : 🔍 갤러리 이미지 조회 요청 - 사용자: kakao_4290101000
2025-06-19T01:42:17.723Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.gallery.GalleryService     : 🔍 사용자 갤러리 이미지 조회 시작 - 사용자: kakao_4290101000
2025-06-19T01:42:17.773Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.gallery.GalleryService     : 🔍 이미지가 있는 스토리 개수: 20
2025-06-19T01:42:17.806Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.gallery.GalleryService     : 🔍 색칠 완성작 개수: 7
2025-06-19T01:42:17.808Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.gallery.GalleryService     : ✅ 갤러리 이미지 변환 완료 - 최종 개수: 27
2025-06-19T01:42:17.809Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.gallery.GalleryService     :    - 동화 이미지: 20개
2025-06-19T01:42:17.810Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.gallery.GalleryService     :    - 색칠 완성작: 7개
2025-06-19T01:42:17.815Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.gallery.GalleryController  : ✅ 갤러리 이미지 조회 완료 - 개수: 27
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T01:52:06.029Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-19T01:52:06.032Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-19T01:52:06.032Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-19T01:52:06.046Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-19T01:52:06.047Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-19T01:52:06.070Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-19T01:52:06.070Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-19T01:52:06.070Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-19T01:52:06.071Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-19T01:52:06.072Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T01:52:06.072Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-19T01:52:06.072Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-19T01:52:06.080Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T01:52:27.743Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T01:52:27.753Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-19T01:52:27.806Z  INFO 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 118
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T01:52:27.940Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 118
2025-06-19T01:52:27.941Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 118
2025-06-19T01:52:27.948Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1626
2025-06-19T01:52:27.951Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1626, voice = onyx, speed = 1.0
2025-06-19T01:52:27.951Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T01:52:27.952Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-19T01:52:27.952Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-19T01:52:27.955Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T01:53:07.552Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T01:53:07.553Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-19T01:53:07.628Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 5790080 문자
2025-06-19T01:53:07.629Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 음성 타입: onyx
2025-06-19T01:53:07.661Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4342560 bytes
2025-06-19T01:53:07.673Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_118_1750297987662.mp3
2025-06-19T01:53:07.673Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_118_1750297987662.mp3
2025-06-19T01:53:07.674Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/19/b91cc667_temp_voice_118_1750297987662.mp3
2025-06-19T01:53:08.224Z  WARN 95491 --- [0.0-8080-exec-7] com.amazonaws.util.Base64                : JAXB is unavailable. Will fallback to SDK implementation which may be less performant.If you are using Java 9+, you will need to include javax.xml.bind:jaxb-api as a dependency.
2025-06-19T01:53:08.225Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/19/b91cc667_temp_voice_118_1750297987662.mp3
2025-06-19T01:53:08.225Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/19/b91cc667_temp_voice_118_1750297987662.mp3, 만료시간: 1440분
2025-06-19T01:53:08.228Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b91cc667_temp_voice_118_1750297987662.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T015308Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=eae2159b3db88f40240d41a5b641730347720232a1b73c72a82091d9b515a025
2025-06-19T01:53:08.228Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b91cc667_temp_voice_118_1750297987662.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T015308Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=eae2159b3db88f40240d41a5b641730347720232a1b73c72a82091d9b515a025
2025-06-19T01:53:08.228Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b91cc667_temp_voice_118_1750297987662.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T015308Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=eae2159b3db88f40240d41a5b641730347720232a1b73c72a82091d9b515a025
2025-06-19T01:53:08.230Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-19T01:53:08.230Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b91cc667_temp_voice_118_1750297987662.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T015308Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=eae2159b3db88f40240d41a5b641730347720232a1b73c72a82091d9b515a025
2025-06-19T01:53:08.257Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b91cc667_temp_voice_118_1750297987662.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T015308Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=eae2159b3db88f40240d41a5b641730347720232a1b73c72a82091d9b515a025
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T01:53:10.861Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 118
2025-06-19T01:53:10.867Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T01:53:10.867Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-19T01:53:10.868Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-19T01:53:10.869Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T01:53:13.317Z ERROR 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-19T01:53:13.318Z ERROR 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ❌ 이미지 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-19T01:53:13.320Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔄 더미 이미지로 저장 완료: https://picsum.photos/800/600?random=1750297993318
2025-06-19T01:53:13.320Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ⚠️ 더미 이미지이므로 색칠공부 템플릿 생성 건너뜀
2025-06-19T01:53:13.329Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-19T01:53:13.329Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : Story ID: 118
2025-06-19T01:53:13.329Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-19T01:53:13.329Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750297993318
2025-06-19T01:53:13.330Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-19T01:53:13.330Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : Voice Content: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b91cc667_temp_voice_118_1750297987662.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T015308Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=eae2159b3db88f40240d41a5b641730347720232a1b73c72a82091d9b515a025
2025-06-19T02:06:16.164Z  INFO 95491 --- [0.0-8080-exec-3] o.apache.coyote.http11.Http11Processor   : Error parsing HTTP request header
 Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level.

java.lang.IllegalArgumentException: Invalid character found in method name [0x160x030x030x010xa30x010x000x010x9f0x030x030xbf0xda0xe9j0xc00xa80x12#3?0xf7t0xd1-0xf70x840x800x100x170xd1230x1e0xd1oD#+x40xa10xfe ]. HTTP method names must be tokens
	at org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:403) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:271) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-06-19T02:08:56.269Z ERROR 95491 --- [0.0-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: 토큰 갱신 중 오류 발생] with root cause

java.lang.RuntimeException: 리프레시 토큰이 일치하지 않습니다.
	at com.fairytale.fairytale.auth.service.OAuthService.refreshTokens(OAuthService.java:337) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at com.fairytale.fairytale.auth.service.OAuthService$$SpringCGLIB$$0.refreshTokens(<generated>) ~[!/:0.0.1-SNAPSHOT]
	at com.fairytale.fairytale.auth.controller.OAuthController.refreshToken(OAuthController.java:62) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at com.fairytale.fairytale.auth.strategy.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:31) ~[!/:0.0.1-SNAPSHOT]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-06-19T02:09:00.504Z  INFO 95491 --- [0.0-8080-exec-8] c.f.f.auth.controller.OAuthController    : OAuth 로그인 요청 - Provider: kakao
🔍 OAuth 로그인 시작 - Provider: kakao
🔍 사용자명 중복으로 인한 변경: kakao_4290101000_1
🔍 소셜 로그인 사용자 정보: kakao_4290101000_1
🔍 saveOrUpdateUser 시작 - 이메일: dnflsmstltk12@daum.net
🔍 USER 역할 찾는 중...
🔍 USER 역할 조회 완료
🔍 사용자 역할 설정 완료: USER
🔍 이메일로 사용자 찾는 중: dnflsmstltk12@daum.net
🔍 이메일 조회 결과: 발견
🔍 기존 사용자 업데이트: kakao_4290101000
🔍 DB 저장 완료 - ID: 2, Username: kakao_4290101000
🔍 JWT 토큰 생성 - Username: kakao_4290101000, Nickname: 옥현우
🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우
🔍 JWT 생성 - Username: kakao_4290101000, Nickname: 옥현우
🔍 JWT 토큰 발급 완료
2025-06-19T02:09:00.720Z  INFO 95491 --- [0.0-8080-exec-8] c.f.f.auth.controller.OAuthController    : OAuth 로그인 성공 - Provider: kakao
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T02:09:04.794Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-19T02:09:04.797Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-19T02:09:04.797Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=도전, voice=onyx, babyId=2
2025-06-19T02:09:04.803Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-19T02:09:04.803Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-19T02:09:04.806Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-19T02:09:04.806Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-19T02:09:04.807Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-19T02:09:04.807Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='도전 동화'
2025-06-19T02:09:04.807Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:09:04.807Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-19T02:09:04.807Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-19T02:09:04.807Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T02:09:24.203Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:09:24.204Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-19T02:09:24.212Z  INFO 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 119
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T02:09:24.343Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 119
2025-06-19T02:09:24.343Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 119
2025-06-19T02:09:24.347Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1553
2025-06-19T02:09:24.347Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1553, voice = onyx, speed = 1.0
2025-06-19T02:09:24.347Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:09:24.347Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-19T02:09:24.347Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-19T02:09:24.347Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T02:09:27.443Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 119
2025-06-19T02:09:27.448Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:09:27.451Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-19T02:09:27.451Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-19T02:09:27.452Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T02:09:31.295Z ERROR 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-19T02:09:31.296Z ERROR 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ❌ 이미지 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-19T02:09:31.296Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : 🔄 더미 이미지로 저장 완료: https://picsum.photos/800/600?random=1750298971296
2025-06-19T02:09:31.296Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryService         : ⚠️ 더미 이미지이므로 색칠공부 템플릿 생성 건너뜀
2025-06-19T02:09:31.302Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-19T02:09:31.302Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Story ID: 119
2025-06-19T02:09:31.302Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Title: 도전 동화
2025-06-19T02:09:31.303Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750298971296
2025-06-19T02:09:31.303Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-19T02:09:31.303Z  INFO 95491 --- [0.0-8080-exec-8] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-19T02:09:55.743Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:09:55.744Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-19T02:09:55.801Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 5575680 문자
2025-06-19T02:09:55.802Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 음성 타입: onyx
2025-06-19T02:09:55.831Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4181760 bytes
2025-06-19T02:09:55.838Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_119_1750298995831.mp3
2025-06-19T02:09:55.839Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_119_1750298995831.mp3
2025-06-19T02:09:55.840Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/19/5135dc92_temp_voice_119_1750298995831.mp3
2025-06-19T02:09:56.113Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/19/5135dc92_temp_voice_119_1750298995831.mp3
2025-06-19T02:09:56.113Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/19/5135dc92_temp_voice_119_1750298995831.mp3, 만료시간: 1440분
2025-06-19T02:09:56.116Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/5135dc92_temp_voice_119_1750298995831.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T020956Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a2a0bad71a43597477ff29f0a455c501381727e40e45377ac302c2e4944aac18
2025-06-19T02:09:56.116Z  INFO 95491 --- [0.0-8080-exec-7] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/5135dc92_temp_voice_119_1750298995831.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T020956Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a2a0bad71a43597477ff29f0a455c501381727e40e45377ac302c2e4944aac18
2025-06-19T02:09:56.116Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/5135dc92_temp_voice_119_1750298995831.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T020956Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a2a0bad71a43597477ff29f0a455c501381727e40e45377ac302c2e4944aac18
2025-06-19T02:09:56.117Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-19T02:09:56.117Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/5135dc92_temp_voice_119_1750298995831.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T020956Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a2a0bad71a43597477ff29f0a455c501381727e40e45377ac302c2e4944aac18
2025-06-19T02:09:56.144Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/5135dc92_temp_voice_119_1750298995831.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T020956Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=a2a0bad71a43597477ff29f0a455c501381727e40e45377ac302c2e4944aac18
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T02:48:09.960Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-19T02:48:09.962Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-19T02:48:09.962Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=가족, voice=echo, babyId=2
2025-06-19T02:48:09.970Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-19T02:48:09.970Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-19T02:48:09.973Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-19T02:48:09.973Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-19T02:48:09.973Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-19T02:48:09.973Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='가족 동화'
2025-06-19T02:48:09.973Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:48:09.973Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-19T02:48:09.973Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-19T02:48:09.973Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T02:48:22.755Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:48:22.755Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-19T02:48:22.767Z  INFO 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 120
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T02:48:22.931Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 120
2025-06-19T02:48:22.931Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 120
2025-06-19T02:48:22.934Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1383
2025-06-19T02:48:22.935Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1383, voice = echo, speed = 1.0
2025-06-19T02:48:22.935Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:48:22.935Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-19T02:48:22.935Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-19T02:48:22.936Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T02:48:26.804Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 120
2025-06-19T02:48:26.809Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:48:26.809Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-19T02:48:26.809Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-19T02:48:26.811Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T02:48:30.328Z ERROR 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-19T02:48:30.328Z ERROR 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ❌ 이미지 생성 실패: FastAPI 호출 실패: 500 Internal Server Error on POST request for "http://3.36.41.71/ai/generate/image": "{"detail":"이미지 생성 실패: 500: 이미지 생성 실패"}"
2025-06-19T02:48:30.329Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔄 더미 이미지로 저장 완료: https://picsum.photos/800/600?random=1750301310328
2025-06-19T02:48:30.329Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ⚠️ 더미 이미지이므로 색칠공부 템플릿 생성 건너뜀
2025-06-19T02:48:30.335Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-19T02:48:30.335Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Story ID: 120
2025-06-19T02:48:30.335Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Title: 가족 동화
2025-06-19T02:48:30.335Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750301310328
2025-06-19T02:48:30.335Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-19T02:48:30.335Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-19T02:48:59.309Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:48:59.310Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-19T02:48:59.350Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 4919040 문자
2025-06-19T02:48:59.350Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 음성 타입: echo
2025-06-19T02:48:59.360Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 3689280 bytes
2025-06-19T02:48:59.367Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_120_1750301339361.mp3
2025-06-19T02:48:59.367Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_120_1750301339361.mp3
2025-06-19T02:48:59.367Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/19/7a2cfae8_temp_voice_120_1750301339361.mp3
2025-06-19T02:48:59.586Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/19/7a2cfae8_temp_voice_120_1750301339361.mp3
2025-06-19T02:48:59.586Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/19/7a2cfae8_temp_voice_120_1750301339361.mp3, 만료시간: 1440분
2025-06-19T02:48:59.588Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/7a2cfae8_temp_voice_120_1750301339361.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T024859Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=9e5fe0938b36fba3e2a3c41fa3335cbfbf56c44698bcd0cb297033815259878c
2025-06-19T02:48:59.588Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/7a2cfae8_temp_voice_120_1750301339361.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T024859Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=9e5fe0938b36fba3e2a3c41fa3335cbfbf56c44698bcd0cb297033815259878c
2025-06-19T02:48:59.588Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/7a2cfae8_temp_voice_120_1750301339361.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T024859Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=9e5fe0938b36fba3e2a3c41fa3335cbfbf56c44698bcd0cb297033815259878c
2025-06-19T02:48:59.589Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-19T02:48:59.590Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/7a2cfae8_temp_voice_120_1750301339361.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T024859Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=9e5fe0938b36fba3e2a3c41fa3335cbfbf56c44698bcd0cb297033815259878c
2025-06-19T02:48:59.603Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/7a2cfae8_temp_voice_120_1750301339361.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T024859Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=9e5fe0938b36fba3e2a3c41fa3335cbfbf56c44698bcd0cb297033815259878c
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 2
🔍 조회된 아이 정보: 다다 (2)
✅ 아이 정보 조회 성공: 다다
🔍 응답 데이터: {data={gender=female, name=다다, id=2, birthDate=2025-06-30}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T02:51:24.084Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4290101000
2025-06-19T02:51:24.086Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4290101000
2025-06-19T02:51:24.086Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=자연, voice=onyx, babyId=2
2025-06-19T02:51:24.095Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 2
2025-06-19T02:51:24.095Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 2
2025-06-19T02:51:24.097Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 2
2025-06-19T02:51:24.098Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=2, Name='다다'
2025-06-19T02:51:24.098Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '다다'
2025-06-19T02:51:24.098Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='다다', theme='자연 동화'
2025-06-19T02:51:24.098Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:51:24.098Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-19T02:51:24.098Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-19T02:51:24.098Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T02:51:55.189Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:51:55.189Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 2
2025-06-19T02:51:55.199Z  INFO 95491 --- [0.0-8080-exec-7] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 121
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T02:51:55.866Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 121
2025-06-19T02:51:55.868Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 121
2025-06-19T02:51:55.873Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1632
2025-06-19T02:51:55.873Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1632, voice = onyx, speed = 1.0
2025-06-19T02:51:55.874Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:51:55.875Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-19T02:51:55.875Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-19T02:51:55.876Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4290101000
2025-06-19T02:51:59.330Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 121
2025-06-19T02:51:59.334Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:51:59.335Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-19T02:51:59.335Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-19T02:51:59.335Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T02:52:11.951Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:52:11.952Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-19T02:52:11.952Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image.png"}
2025-06-19T02:52:11.952Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-19T02:52:11.953Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image.png
2025-06-19T02:52:11.953Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image.png
2025-06-19T02:52:11.953Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image.png
2025-06-19T02:52:11.953Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image.png
2025-06-19T02:52:11.954Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image.png
2025-06-19T02:52:11.954Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image.png
2025-06-19T02:52:11.954Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image.png
2025-06-19T02:52:11.954Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image.png
2025-06-19T02:52:11.954Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image.png
2025-06-19T02:52:11.954Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image.png
2025-06-19T02:52:11.954Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image.png
2025-06-19T02:52:11.954Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image.png
2025-06-19T02:52:11.954Z  WARN 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-19T02:52:11.955Z ERROR 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image.png
2025-06-19T02:52:11.955Z ERROR 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image.png
2025-06-19T02:52:11.955Z ERROR 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-19T02:52:11.957Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-19T02:52:12.050Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 121
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 121
2025-06-19T02:52:12.060Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750301531956
2025-06-19T02:52:12.060Z  WARN 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750301531956
2025-06-19T02:52:12.067Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-19T02:52:12.067Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : Story ID: 121
2025-06-19T02:52:12.067Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : Title: 자연 동화
2025-06-19T02:52:12.067Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750301531956
2025-06-19T02:52:12.067Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-19T02:52:12.067Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-19T02:52:43.199Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:52:43.199Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-19T02:52:43.259Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 5768320 문자
2025-06-19T02:52:43.259Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 음성 타입: onyx
2025-06-19T02:52:43.274Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4326240 bytes
2025-06-19T02:52:43.279Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_121_1750301563274.mp3
2025-06-19T02:52:43.279Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_121_1750301563274.mp3
2025-06-19T02:52:43.280Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/19/b7d0fbe7_temp_voice_121_1750301563274.mp3
2025-06-19T02:52:43.383Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/19/b7d0fbe7_temp_voice_121_1750301563274.mp3
2025-06-19T02:52:43.383Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/19/b7d0fbe7_temp_voice_121_1750301563274.mp3, 만료시간: 1440분
2025-06-19T02:52:43.386Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b7d0fbe7_temp_voice_121_1750301563274.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025243Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=13e454df61b2d774646433faa5d70555db474fb7c22fae72d752b126097a3bc4
2025-06-19T02:52:43.386Z  INFO 95491 --- [0.0-8080-exec-9] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b7d0fbe7_temp_voice_121_1750301563274.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025243Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=13e454df61b2d774646433faa5d70555db474fb7c22fae72d752b126097a3bc4
2025-06-19T02:52:43.386Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b7d0fbe7_temp_voice_121_1750301563274.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025243Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=13e454df61b2d774646433faa5d70555db474fb7c22fae72d752b126097a3bc4
2025-06-19T02:52:43.388Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-19T02:52:43.389Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b7d0fbe7_temp_voice_121_1750301563274.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025243Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=13e454df61b2d774646433faa5d70555db474fb7c22fae72d752b126097a3bc4
2025-06-19T02:52:43.395Z  INFO 95491 --- [0.0-8080-exec-9] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/b7d0fbe7_temp_voice_121_1750301563274.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025243Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86399&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=13e454df61b2d774646433faa5d70555db474fb7c22fae72d752b126097a3bc4
2025-06-19T02:53:19.661Z ERROR 95491 --- [0.0-8080-exec-5] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: Cannot invoke "org.springframework.security.core.Authentication.getName()" because "auth" is null
2025-06-19T02:53:20.922Z ERROR 95491 --- [0.0-8080-exec-4] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: Cannot invoke "org.springframework.security.core.Authentication.getName()" because "auth" is null
2025-06-19T02:53:21.253Z ERROR 95491 --- [0.0-8080-exec-6] c.f.fairytale.story.StoryController      : ❌ 컨트롤러 에러: Cannot invoke "org.springframework.security.core.Authentication.getName()" because "auth" is null
2025-06-19T02:53:24.256Z ERROR 95491 --- [0.0-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: 토큰 갱신 중 오류 발생] with root cause

java.lang.RuntimeException: 리프레시 토큰이 일치하지 않습니다.
	at com.fairytale.fairytale.auth.service.OAuthService.refreshTokens(OAuthService.java:337) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.7.jar!/:6.2.7]
	at com.fairytale.fairytale.auth.service.OAuthService$$SpringCGLIB$$0.refreshTokens(<generated>) ~[!/:0.0.1-SNAPSHOT]
	at com.fairytale.fairytale.auth.controller.OAuthController.refreshToken(OAuthController.java:62) ~[!/:0.0.1-SNAPSHOT]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at com.fairytale.fairytale.auth.strategy.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:31) ~[!/:0.0.1-SNAPSHOT]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.0.jar!/:6.5.0]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.7.jar!/:6.2.7]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-06-19T02:53:33.920Z  INFO 95491 --- [.0-8080-exec-10] c.f.f.auth.controller.OAuthController    : OAuth 로그인 요청 - Provider: kakao
🔍 OAuth 로그인 시작 - Provider: kakao
🔍 사용자명 중복으로 인한 변경: kakao_4287771333_1
🔍 소셜 로그인 사용자 정보: kakao_4287771333_1
🔍 saveOrUpdateUser 시작 - 이메일: ansdud923@naver.com
🔍 USER 역할 찾는 중...
🔍 USER 역할 조회 완료
🔍 사용자 역할 설정 완료: USER
🔍 이메일로 사용자 찾는 중: ansdud923@naver.com
🔍 이메일 조회 결과: 발견
🔍 기존 사용자 업데이트: kakao_4287771333
🔍 DB 저장 완료 - ID: 1, Username: kakao_4287771333
🔍 JWT 토큰 생성 - Username: kakao_4287771333, Nickname: 나현
🔍 JWT 생성 - Username: kakao_4287771333, Nickname: 나현
🔍 JWT 생성 - Username: kakao_4287771333, Nickname: 나현
🔍 JWT 토큰 발급 완료
2025-06-19T02:53:34.048Z  INFO 95491 --- [.0-8080-exec-10] c.f.f.auth.controller.OAuthController    : OAuth 로그인 성공 - Provider: kakao
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
🔍 ===== 아이 정보 조회 요청 =====
🔍 요청된 userId: 1
🔍 조회된 아이 정보: 곰돌이 (1)
✅ 아이 정보 조회 성공: 곰돌이
🔍 응답 데이터: {data={gender=female, name=곰돌이, id=1, birthDate=2025-06-26}, success=true, hasChild=true}
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-19T02:57:50.674Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryController      : 🔍 컨트롤러에서 받은 username: kakao_4287771333
2025-06-19T02:57:50.678Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 생성 시작 - Username: kakao_4287771333
2025-06-19T02:57:50.679Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 받은 요청: theme=가족, voice=nova, babyId=1
2025-06-19T02:57:50.684Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 사용자 조회 성공 - ID: 1
2025-06-19T02:57:50.685Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 babyId가 제공됨: 1
2025-06-19T02:57:50.688Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ Baby 엔티티 찾음 - ID: 1
2025-06-19T02:57:50.688Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 Baby 정보: ID=1, Name='곰돌이'
2025-06-19T02:57:50.688Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ 유효한 아기 이름 설정: '곰돌이'
2025-06-19T02:57:50.689Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🚀 FastAPI로 전송할 데이터: name='곰돌이', theme='가족 동화'
2025-06-19T02:57:50.689Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:57:50.689Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/story
2025-06-19T02:57:50.689Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiStoryRequest
2025-06-19T02:57:50.689Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T02:58:09.582Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:58:09.583Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : ✅ Story에 baby 연결 완료 - baby ID: 1
2025-06-19T02:58:09.591Z  INFO 95491 --- [.0-8080-exec-10] c.f.fairytale.story.StoryService         : 🔍 스토리 저장 완료 - ID: 122
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-19T02:58:10.082Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : 🎤 음성 생성 요청 - StoryId: 122
2025-06-19T02:58:10.085Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 음성 생성 시작 - StoryId: 122
2025-06-19T02:58:10.089Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 스토리 조회 성공 - Content 길이: 1781
2025-06-19T02:58:10.090Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 음성 요청: text 길이 = 1781, voice = nova, speed = 1.0
2025-06-19T02:58:10.090Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:58:10.091Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/voice
2025-06-19T02:58:10.091Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: FastApiVoiceRequest
2025-06-19T02:58:10.091Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
🔍 JWT에서 추출한 username: kakao_4287771333
2025-06-19T02:58:41.202Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎨 이미지 생성 요청 - StoryId: 122
2025-06-19T02:58:41.205Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 호출 시작
2025-06-19T02:58:41.205Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 URL: http://3.36.41.71/ai/generate/image
2025-06-19T02:58:41.205Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 요청 객체 타입: HashMap
2025-06-19T02:58:41.206Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 HTTP 요청 전송 중...
2025-06-19T02:58:49.778Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:58:49.778Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 Base64 음성 처리 시작
2025-06-19T02:58:49.834Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 Base64 데이터 길이: 6325760 문자
2025-06-19T02:58:49.835Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 음성 타입: nova
2025-06-19T02:58:49.850Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 디코딩된 오디오 크기: 4744320 bytes
2025-06-19T02:58:49.859Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 📝 임시 파일 저장 완료: /opt/fairytale/temp_voice_122_1750301929850.mp3
2025-06-19T02:58:49.859Z  INFO 95491 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : 📤 S3 오디오 파일 업로드 시작 (Presigned URL): /opt/fairytale/temp_voice_122_1750301929850.mp3
2025-06-19T02:58:49.860Z  INFO 95491 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : 🔑 생성된 S3 키: audio/2025/06/19/0c2ff2d2_temp_voice_122_1750301929850.mp3
2025-06-19T02:58:50.079Z  INFO 95491 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : ✅ S3 업로드 완료 (비공개): audio/2025/06/19/0c2ff2d2_temp_voice_122_1750301929850.mp3
2025-06-19T02:58:50.079Z  INFO 95491 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : 🔗 오디오 Presigned URL 생성: audio/2025/06/19/0c2ff2d2_temp_voice_122_1750301929850.mp3, 만료시간: 1440분
2025-06-19T02:58:50.080Z  INFO 95491 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : ✅ 오디오 Presigned URL 생성 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/0c2ff2d2_temp_voice_122_1750301929850.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025850Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=ed40922f8907b612c71200f1e41ce2bf7233d61176e56cfda4776a66ce460840
2025-06-19T02:58:50.080Z  INFO 95491 --- [0.0-8080-exec-1] c.fairytale.fairytale.service.S3Service  : ✅ Presigned URL 생성: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/0c2ff2d2_temp_voice_122_1750301929850.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025850Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=ed40922f8907b612c71200f1e41ce2bf7233d61176e56cfda4776a66ce460840
2025-06-19T02:58:50.080Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : ✅ S3 업로드 완료: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/0c2ff2d2_temp_voice_122_1750301929850.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025850Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=ed40922f8907b612c71200f1e41ce2bf7233d61176e56cfda4776a66ce460840
2025-06-19T02:58:50.081Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🧹 임시 파일 삭제 완료
2025-06-19T02:58:50.081Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryService         : 🔍 S3 처리된 음성 URL: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/0c2ff2d2_temp_voice_122_1750301929850.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025850Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=ed40922f8907b612c71200f1e41ce2bf7233d61176e56cfda4776a66ce460840
2025-06-19T02:58:50.087Z  INFO 95491 --- [0.0-8080-exec-1] c.f.fairytale.story.StoryController      : ✅ 음성 생성 완료 - VoiceContent: https://fairytale-s3bucket.s3.ap-northeast-2.amazonaws.com/audio/2025/06/19/0c2ff2d2_temp_voice_122_1750301929850.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250619T025850Z&X-Amz-SignedHeaders=host&X-Amz-Expires=86400&X-Amz-Credential=AKIA5B2YVJDBCYJSKI4U%2F20250619%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Signature=ed40922f8907b612c71200f1e41ce2bf7233d61176e56cfda4776a66ce460840
2025-06-19T02:58:51.218Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 상태코드: 200 OK
2025-06-19T02:58:51.219Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 이미지 경로 파싱 시작
2025-06-19T02:58:51.219Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 FastAPI 응답 원문: {"image_url":"./fairy_tale_image_1.png"}
2025-06-19T02:58:51.220Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 JSON 파싱 성공
2025-06-19T02:58:51.220Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 image_url 필드에서 추출: ./fairy_tale_image_1.png
2025-06-19T02:58:51.220Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ✅ 로컬 파일 경로: ./fairy_tale_image_1.png
2025-06-19T02:58:51.220Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎯 로컬 이미지 생성 완료: ./fairy_tale_image_1.png
2025-06-19T02:58:51.221Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 이미지 파일 경로 해결 시작: ./fairy_tale_image_1.png
2025-06-19T02:58:51.221Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/./fairy_tale_image_1.png
2025-06-19T02:58:51.221Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/../python/fairy_tale_image_1.png
2025-06-19T02:58:51.221Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /opt/fairytale/fairy_tale_image_1.png
2025-06-19T02:58:51.222Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 검색 시도: /tmp/fairy_tale_image_1.png
2025-06-19T02:58:51.222Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/./fairy_tale_image_1.png
2025-06-19T02:58:51.222Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/../python/fairy_tale_image_1.png
2025-06-19T02:58:51.223Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /opt/fairytale/fairy_tale_image_1.png
2025-06-19T02:58:51.223Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🔍 파일명으로 검색 시도: /tmp/fairy_tale_image_1.png
2025-06-19T02:58:51.223Z  WARN 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 모든 경로에서 파일을 찾을 수 없음
2025-06-19T02:58:51.223Z ERROR 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 해결된 경로에서도 파일을 찾을 수 없음: /opt/fairytale/./fairy_tale_image_1.png
2025-06-19T02:58:51.223Z ERROR 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ 이미지 처리 실패: 이미지 파일을 찾을 수 없습니다: ./fairy_tale_image_1.png
2025-06-19T02:58:51.224Z ERROR 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ❌ S3 이미지 업로드 실패: 이미지 처리 실패
2025-06-19T02:58:51.224Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ✅ 이미지 저장 완료
2025-06-19T02:58:51.237Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🎨 색칠공부 템플릿 자동 생성 시작 - StoryId: 122
🔍 [ColoringTemplateService] 동화별 색칠공부 템플릿 조회 - StoryId: 122
2025-06-19T02:58:51.243Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : 🚫 Picsum 더미 이미지는 색칠공부에서 제외: https://picsum.photos/800/600?random=1750301931224
2025-06-19T02:58:51.243Z  WARN 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryService         : ⚠️ 유효하지 않은 이미지 URL로 색칠공부 템플릿 생성 건너뜀: https://picsum.photos/800/600?random=1750301931224
2025-06-19T02:58:51.248Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : === 컨트롤러 응답 데이터 ===
2025-06-19T02:58:51.248Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Story ID: 122
2025-06-19T02:58:51.248Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Title: 가족 동화
2025-06-19T02:58:51.248Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Image URL: https://picsum.photos/800/600?random=1750301931224
2025-06-19T02:58:51.248Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Image URL 길이: 50
2025-06-19T02:58:51.248Z  INFO 95491 --- [0.0-8080-exec-2] c.f.fairytale.story.StoryController      : Voice Content: 
2025-06-19T02:59:35.399Z  INFO 95491 --- [0.0-8080-exec-9] o.apache.coyote.http11.Http11Processor   : Error parsing HTTP request header
 Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level.

java.lang.IllegalArgumentException: Invalid character found in method name [0x160x030x010x000xee0x010x000x000xea0x030x03>0x95osXi0xfaa0x950xc50xc30x1190x810xd4K0xf70x91A0xe50x190xf7vt0xcf0x9cy0x0dZXFp ]. HTTP method names must be tokens
	at org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:403) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:271) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.41.jar!/:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

